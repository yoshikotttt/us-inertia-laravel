import{g as Qe,r as Te,j as me}from"./app-c863a855.js";var He={exports:{}};/*!
 * SkyWay Copyright(c) 2022 NTT Communications Corporation
 * peerjs Copyright(c) 2013 Michelle Bu <michelle@michellebu.com>
 */(function(Ue,Ve){(function(v,l){Ue.exports=l()})(globalThis,function(){return function(I){var v={};function l(a){if(v[a])return v[a].exports;var p=v[a]={i:a,l:!1,exports:{}};return I[a].call(p.exports,p,p.exports,l),p.l=!0,p.exports}return l.m=I,l.c=v,l.d=function(a,p,h){l.o(a,p)||Object.defineProperty(a,p,{enumerable:!0,get:h})},l.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},l.t=function(a,p){if(p&1&&(a=l(a)),p&8||p&4&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(l.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),p&2&&typeof a!="string")for(var y in a)l.d(h,y,(function(x){return a[x]}).bind(null,y));return h},l.n=function(a){var p=a&&a.__esModule?function(){return a.default}:function(){return a};return l.d(p,"a",p),p},l.o=function(a,p){return Object.prototype.hasOwnProperty.call(a,p)},l.p="",l(l.s="./src/peer.js")}({"./node_modules/@jitsi/sdp-interop/lib/array-equals.js":function(I,v){I.exports=function l(a){if(!a||this.length!=a.length)return!1;for(var p=0,h=this.length;p<h;p++)if(this[p]instanceof Array&&a[p]instanceof Array){if(!l.apply(this[p],[a[p]]))return!1}else if(this[p]!=a[p])return!1;return!0}},"./node_modules/@jitsi/sdp-interop/lib/index.js":function(I,v,l){v.Interop=l("./node_modules/@jitsi/sdp-interop/lib/interop.js")},"./node_modules/@jitsi/sdp-interop/lib/interop.js":function(I,v,l){var a=l("./node_modules/@jitsi/sdp-interop/lib/transform.js"),p=l("./node_modules/@jitsi/sdp-interop/lib/array-equals.js");function h(m){typeof m.mid=="number"&&(m.mid=m.mid.toString())}function y(){this.cache={mlB2UMap:{},mlU2BMap:{}}}I.exports=y,y.prototype.candidateToUnifiedPlan=function(m){var f=new RTCIceCandidate(m);return f.sdpMLineIndex=this.cache.mlB2UMap[f.sdpMLineIndex],f},y.prototype.candidateToPlanB=function(m){var f=new RTCIceCandidate(m);if(f.sdpMid.indexOf("audio")===0)f.sdpMid="audio";else if(f.sdpMid.indexOf("video")===0)f.sdpMid="video";else throw new Error("candidate with "+f.sdpMid+" not allowed");return f.sdpMLineIndex=this.cache.mlU2BMap[f.sdpMLineIndex],f},y.prototype.getFirstSendingIndexFromAnswer=function(m){if(!this.cache.answer)return null;var f=a.parse(this.cache.answer);if(f&&f.media&&Array.isArray(f.media)){for(var e=0;e<f.media.length;e++)if(f.media[e].type==m&&(!f.media[e].direction||f.media[e].direction==="sendrecv"||f.media[e].direction==="sendonly"))return e}return null},y.prototype.toPlanB=function(m){var f=this;if(typeof m!="object"||m===null||typeof m.sdp!="string")return console.warn("An empty description was passed as an argument."),m;var e=a.parse(m.sdp);if(typeof e.media>"u"||!Array.isArray(e.media)||e.media.length===0)return console.warn("The description has no media."),m;if(e.media.length<=3&&e.media.every(function(C){return["video","audio","data"].indexOf(C.mid)!==-1}))return console.warn("This description does not look like Unified Plan."),m;for(var o=m.sdp,c=!1,i=0;i<e.media.length;i++){var t=e.media[i];t.rtp.forEach(function(C){if(C.codec==="NULL"){c=!0;var _=a.parse(f.cache.offer);C.codec=_.media[i].rtp[0].codec}})}c&&(o=a.write(e)),this.cache[m.type]=o;var d=e.media;e.media=[];var S={},B=[],k={};d.forEach(function(C){if(h(C),(typeof C.rtcpMux!="string"||C.rtcpMux!=="rtcp-mux")&&C.direction!=="inactive"&&C.type!=="application")throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");(typeof S[C.type]>"u"||S[C.type].direction==="inactive")&&(S[C.type]=C)}),d.forEach(function(C){var _=C.type;if(_==="application"){C.mid="data",e.media.push(C),B.push(C.mid);return}typeof C.sources=="object"&&Object.keys(C.sources).forEach(function(b){typeof S[_].sources!="object"&&(S[_].sources={}),S[_].sources[b]=C.sources[b],typeof C.msid<"u"&&(S[_].sources[b].msid=C.msid)}),typeof C.ssrcGroups<"u"&&Array.isArray(C.ssrcGroups)&&((typeof S[_].ssrcGroups>"u"||!Array.isArray(S[_].ssrcGroups))&&(S[_].ssrcGroups=[]),p.apply(S[_].ssrcGroups,[C.ssrcGroups])||(S[_].ssrcGroups=S[_].ssrcGroups.concat(C.ssrcGroups)));var A=C.direction;k[_]=(k[_]||0)|x[A||"inactive"],S[_]===C&&(C.mid=_,delete C.bundleOnly,delete C.msid,A!=="inactive"&&B.push(_),e.media.push(C))}),e.groups.some(function(C){if(C.type==="BUNDLE")return C.mids=B.join(" "),!0}),e.msidSemantic={semantic:"WMS",token:"*"};var E=a.write(e);return new RTCSessionDescription({type:m.type,sdp:E})},y.prototype.toUnifiedPlan=function(m){var f=this;if(typeof m!="object"||m===null||typeof m.sdp!="string")return console.warn("An empty description was passed as an argument."),m;var e=a.parse(m.sdp);if(typeof e.media>"u"||!Array.isArray(e.media)||e.media.length===0)return console.warn("The description has no media."),m;if(e.media.length>3||!e.media.every(function(_){return["video","audio","data"].indexOf(_.mid)!==-1}))return console.warn("This description does not look like Plan B."),m;var o=[];e.media.forEach(function(_){o.push(_.mid)});var c=!1;if(typeof e.groups<"u"&&Array.isArray(e.groups)&&(c=e.groups.every(function(_){return _.type!=="BUNDLE"||p.apply(_.mids.sort(),[o.sort()])})),!c)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");var i;typeof this.cache[m.type]<"u"&&(i=a.parse(this.cache[m.type]));var t={audio:{},video:{}},d={},S=0,B=0;if(e.media.forEach(function(_){if((typeof _.rtcpMux!="string"||_.rtcpMux!=="rtcp-mux")&&_.direction!=="inactive"&&_.type!=="application")throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if(_.type==="application"){var A=null;i&&i.media&&(A=i.media.find(function(G){return G.type==="application"})),A?d[A.mid]=A:d[_.mid]=_;return}var b=_.sources,T=_.ssrcGroups,N=_.candidates,O=_.iceUfrag,U=_.icePwd,V=_.fingerprint,L=_.port;delete _.sources,delete _.ssrcGroups,delete _.candidates,delete _.iceUfrag,delete _.icePwd,delete _.fingerprint,delete _.port,delete _.mid;var P={};typeof T<"u"&&Array.isArray(T)&&T.forEach(function(G){G.semantics!=="SIM"&&typeof G.ssrcs<"u"&&Array.isArray(G.ssrcs)&&G.ssrcs.forEach(function(Y){typeof P[Y]>"u"&&(P[Y]=[]),P[Y].push(G)})});var W={};typeof b=="object"&&Object.keys(b).forEach(function(G){var Y;if(m.type==="offer"&&!b[G].msid){t[_.type][G]=b[G];return}if(typeof P[G]<"u"&&Array.isArray(P[G])&&P[G].some(function(ne){return ne.ssrcs.some(function(se){if(typeof W[se]=="object")return Y=W[se],!0})}),typeof Y=="object")Y.sources[G]=b[G],delete b[G].msid;else{if(Y=Object.create(_),W[G]=Y,typeof b[G].msid<"u"&&(Y.msid=b[G].msid,delete b[G].msid),Y.sources={},Y.sources[G]=b[G],Y.ssrcGroups=P[G],typeof i<"u"&&typeof i.media<"u"&&Array.isArray(i.media)&&i.media.forEach(function(ne){typeof ne.sources=="object"&&Object.keys(ne.sources).forEach(function(se){se===G&&(Y.mid=ne.mid)})}),h(Y),typeof Y.mid>"u"){if(m.type==="answer")throw new Error("An unmapped SSRC was found.");Y.mid=[_.type,"-",G].join("")}Y.candidates=N,Y.iceUfrag=O,Y.icePwd=U,Y.fingerprint=V,Y.port=L,d[Y.mid]=Y,f.cache.mlU2BMap[B]=S,typeof f.cache.mlB2UMap[S]>"u"&&(f.cache.mlB2UMap[S]=B),B++}}),S++}),e.media=[],o=[],m.type==="answer")for(var k=0;k<i.media.length;k++){var E=i.media[k];h(E),typeof d[E.mid]>"u"&&(delete E.msid,delete E.sources,delete E.ssrcGroups,!E.direction||E.direction==="sendrecv"?E.direction="recvonly":E.direction==="sendonly"&&(E.direction="inactive")),e.media.push(E),typeof E.mid=="string"&&o.push(E.mid)}else typeof i<"u"&&typeof i.media<"u"&&Array.isArray(i.media)&&i.media.forEach(function(_){h(_),o.push(_.mid),typeof d[_.mid]<"u"?e.media.push(d[_.mid]):(delete _.msid,delete _.sources,delete _.ssrcGroups,(!_.direction||_.direction==="sendrecv")&&(_.direction="recvonly"),(!_.direction||_.direction==="sendonly")&&(_.direction="inactive"),e.media.push(_))}),Object.keys(d).forEach(function(_){o.indexOf(_)===-1&&(o.push(_),d[_].direction==="recvonly"?e.media.some(function(A){if((A.direction==="sendrecv"||A.direction==="sendonly")&&A.type===d[_].type)return Object.keys(d[_].sources).forEach(function(b){A.sources[b]=d[_].sources[b]}),!0}):e.media.push(d[_]))});["audio","video"].forEach(function(_){if(!(!e||!e.media||!Array.isArray(e.media))){var A=null;if(Object.keys(t[_]).length>0&&(A=f.getFirstSendingIndexFromAnswer(_),A===null)){for(var b=0;b<e.media.length;b++)if(e.media[b].type===_){A=b;break}}if(A&&e.media.length>A){var T=e.media[A];Object.keys(t[_]).forEach(function(N){T.sources&&T.sources[N]&&console.warn("Replacing an existing SSRC."),T.sources||(T.sources={}),T.sources[N]=t[_][N]})}}}),e.groups.some(function(_){if(_.type==="BUNDLE")return _.mids=o.join(" "),!0}),e.msidSemantic={semantic:"WMS",token:"*"};var C=a.write(e);return this.cache[m.type]=C,new RTCSessionDescription({type:m.type,sdp:C})};var x={inactive:0,recvonly:1,sendonly:2,sendrecv:3}},"./node_modules/@jitsi/sdp-interop/lib/transform.js":function(I,v,l){var a=l("./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/index.js");v.write=function(p,h){return typeof p<"u"&&typeof p.media<"u"&&Array.isArray(p.media)&&p.media.forEach(function(y){typeof y.sources<"u"&&Object.keys(y.sources).length!==0&&(y.ssrcs=[],Object.keys(y.sources).forEach(function(x){var m=y.sources[x];Object.keys(m).forEach(function(f){y.ssrcs.push({id:x,attribute:f,value:m[f]})})}),delete y.sources),typeof y.ssrcGroups<"u"&&Array.isArray(y.ssrcGroups)&&y.ssrcGroups.forEach(function(x){typeof x.ssrcs<"u"&&Array.isArray(x.ssrcs)&&(x.ssrcs=x.ssrcs.join(" "))})}),typeof p<"u"&&typeof p.groups<"u"&&Array.isArray(p.groups)&&p.groups.forEach(function(y){typeof y.mids<"u"&&Array.isArray(y.mids)&&(y.mids=y.mids.join(" "))}),a.write(p,h)},v.parse=function(p){var h=a.parse(p);return typeof h<"u"&&typeof h.media<"u"&&Array.isArray(h.media)&&h.media.forEach(function(y){typeof y.ssrcs<"u"&&Array.isArray(y.ssrcs)&&(y.sources={},y.ssrcs.forEach(function(x){y.sources[x.id]||(y.sources[x.id]={}),y.sources[x.id][x.attribute]=x.value}),delete y.ssrcs),typeof y.ssrcGroups<"u"&&Array.isArray(y.ssrcGroups)&&y.ssrcGroups.forEach(function(x){typeof x.ssrcs=="string"&&(x.ssrcs=x.ssrcs.split(" "))})}),typeof h<"u"&&typeof h.groups<"u"&&Array.isArray(h.groups)&&h.groups.forEach(function(y){typeof y.mids=="string"&&(y.mids=y.mids.split(" "))}),h}},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js":function(I,v){var l=I.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return a.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return a.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(a){return"extmap:%d"+(a.direction?"/%s":"%v")+" %s"+(a.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return a.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(a){var p="candidate:%s %d %s %d %s %d typ %s";return p+=a.raddr!=null?" raddr %s rport %d":"%v%v",p+=a.tcptype!=null?" tcptype %s":"%v",a.generation!=null&&(p+=" generation %d"),p+=a["network-id"]!=null?" network-id %d":"%v",p+=a["network-cost"]!=null?" network-cost %d":"%v",p}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(a){var p="ssrc:%d";return a.attribute!=null&&(p+=" %s",a.value!=null&&(p+=":%s")),p}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(a){return a.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(a){return a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(l).forEach(function(a){var p=l[a];p.forEach(function(h){h.reg||(h.reg=/(.*)/),h.format||(h.format="%s")})})},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/index.js":function(I,v,l){var a=l("./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/parser.js"),p=l("./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/writer.js");v.write=p,v.parse=a.parse,v.parseFmtpConfig=a.parseFmtpConfig,v.parseParams=a.parseParams,v.parsePayloads=a.parsePayloads,v.parseRemoteCandidates=a.parseRemoteCandidates,v.parseImageAttributes=a.parseImageAttributes,v.parseSimulcastStreamList=a.parseSimulcastStreamList},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/parser.js":function(I,v,l){var a=function(f){return String(Number(f))===f?Number(f):f},p=function(f,e,o,c){if(c&&!o)e[c]=a(f[1]);else for(var i=0;i<o.length;i+=1)f[i+1]!=null&&(e[o[i]]=a(f[i+1]))},h=function(f,e,o){var c=f.name&&f.names;f.push&&!e[f.push]?e[f.push]=[]:c&&!e[f.name]&&(e[f.name]={});var i=f.push?{}:c?e[f.name]:e;p(o.match(f.reg),i,f.names,f.name),f.push&&e[f.push].push(i)},y=l("./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js"),x=RegExp.prototype.test.bind(/^([a-z])=(.*)/);v.parse=function(f){var e={},o=[],c=e;return f.split(/(\r\n|\r|\n)/).filter(x).forEach(function(i){var t=i[0],d=i.slice(2);t==="m"&&(o.push({rtp:[],fmtp:[]}),c=o[o.length-1]);for(var S=0;S<(y[t]||[]).length;S+=1){var B=y[t][S];if(B.reg.test(d))return h(B,c,d)}}),e.media=o,e};var m=function(f,e){var o=e.split(/=(.+)/,2);return o.length===2&&(f[o[0]]=a(o[1])),f};v.parseParams=function(f){return f.split(/\;\s?/).reduce(m,{})},v.parseFmtpConfig=v.parseParams,v.parsePayloads=function(f){return f.split(" ").map(Number)},v.parseRemoteCandidates=function(f){for(var e=[],o=f.split(" ").map(a),c=0;c<o.length;c+=3)e.push({component:o[c],ip:o[c+1],port:o[c+2]});return e},v.parseImageAttributes=function(f){return f.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(m,{})})},v.parseSimulcastStreamList=function(f){return f.split(";").map(function(e){return e.split(",").map(function(o){var c,i=!1;return o[0]!=="~"?c=a(o):(c=a(o.substring(1,o.length)),i=!0),{scid:c,paused:i}})})}},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/writer.js":function(I,v,l){var a=l("./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js"),p=/%[sdv%]/g,h=function(f){var e=1,o=arguments,c=o.length;return f.replace(p,function(i){if(e>=c)return i;var t=o[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}})},y=function(f,e,o){var c=e.format instanceof Function?e.format(e.push?o:o[e.name]):e.format,i=[f+"="+c];if(e.names)for(var t=0;t<e.names.length;t+=1){var d=e.names[t];e.name?i.push(o[e.name][d]):i.push(o[e.names[t]])}else i.push(o[e.name]);return h.apply(null,i)},x=["v","o","s","i","u","e","p","c","b","t","r","z","a"],m=["i","c","b","a"];I.exports=function(f,e){e=e||{},f.version==null&&(f.version=0),f.name==null&&(f.name=" "),f.media.forEach(function(t){t.payloads==null&&(t.payloads="")});var o=e.outerOrder||x,c=e.innerOrder||m,i=[];return o.forEach(function(t){a[t].forEach(function(d){d.name in f&&f[d.name]!=null?i.push(y(t,d,f)):d.push in f&&f[d.push]!=null&&f[d.push].forEach(function(S){i.push(y(t,d,S))})})}),f.media.forEach(function(t){i.push(y("m",a.m[0],t)),c.forEach(function(d){a[d].forEach(function(S){S.name in t&&t[S.name]!=null?i.push(y(d,S,t)):S.push in t&&t[S.push]!=null&&t[S.push].forEach(function(B){i.push(y(d,S,B))})})})}),i.join(`\r
`)+`\r
`}},"./node_modules/after/index.js":function(I,v){I.exports=l;function l(p,h,y){var x=!1;return y=y||a,m.count=p,p===0?h():m;function m(f,e){if(m.count<=0)throw new Error("after called too many times");--m.count,f?(x=!0,h(f),h=y):m.count===0&&!x&&h(null,e)}}function a(){}},"./node_modules/arraybuffer.slice/index.js":function(I,v){I.exports=function(l,a,p){var h=l.byteLength;if(a=a||0,p=p||h,l.slice)return l.slice(a,p);if(a<0&&(a+=h),p<0&&(p+=h),p>h&&(p=h),a>=h||a>=p||h===0)return new ArrayBuffer(0);for(var y=new Uint8Array(l),x=new Uint8Array(p-a),m=a,f=0;m<p;m++,f++)x[f]=y[m];return x.buffer}},"./node_modules/backo2/index.js":function(I,v){I.exports=l;function l(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}l.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var p=Math.random(),h=Math.floor(p*this.jitter*a);a=Math.floor(p*10)&1?a+h:a-h}return Math.min(a,this.max)|0},l.prototype.reset=function(){this.attempts=0},l.prototype.setMin=function(a){this.ms=a},l.prototype.setMax=function(a){this.max=a},l.prototype.setJitter=function(a){this.jitter=a}},"./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":function(I,v){(function(l){v.encode=function(a){var p=new Uint8Array(a),h,y=p.length,x="";for(h=0;h<y;h+=3)x+=l[p[h]>>2],x+=l[(p[h]&3)<<4|p[h+1]>>4],x+=l[(p[h+1]&15)<<2|p[h+2]>>6],x+=l[p[h+2]&63];return y%3===2?x=x.substring(0,x.length-1)+"=":y%3===1&&(x=x.substring(0,x.length-2)+"=="),x},v.decode=function(a){var p=a.length*.75,h=a.length,y,x=0,m,f,e,o;a[a.length-1]==="="&&(p--,a[a.length-2]==="="&&p--);var c=new ArrayBuffer(p),i=new Uint8Array(c);for(y=0;y<h;y+=4)m=l.indexOf(a[y]),f=l.indexOf(a[y+1]),e=l.indexOf(a[y+2]),o=l.indexOf(a[y+3]),i[x++]=m<<2|f>>4,i[x++]=(f&15)<<4|e>>2,i[x++]=(e&3)<<6|o&63;return c}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},"./node_modules/base64-js/index.js":function(I,v,l){v.byteLength=e,v.toByteArray=c,v.fromByteArray=d;for(var a=[],p=[],h=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,m=y.length;x<m;++x)a[x]=y[x],p[y.charCodeAt(x)]=x;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63;function f(S){var B=S.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=S.indexOf("=");k===-1&&(k=B);var E=k===B?0:4-k%4;return[k,E]}function e(S){var B=f(S),k=B[0],E=B[1];return(k+E)*3/4-E}function o(S,B,k){return(B+k)*3/4-k}function c(S){var B,k=f(S),E=k[0],C=k[1],_=new h(o(S,E,C)),A=0,b=C>0?E-4:E,T;for(T=0;T<b;T+=4)B=p[S.charCodeAt(T)]<<18|p[S.charCodeAt(T+1)]<<12|p[S.charCodeAt(T+2)]<<6|p[S.charCodeAt(T+3)],_[A++]=B>>16&255,_[A++]=B>>8&255,_[A++]=B&255;return C===2&&(B=p[S.charCodeAt(T)]<<2|p[S.charCodeAt(T+1)]>>4,_[A++]=B&255),C===1&&(B=p[S.charCodeAt(T)]<<10|p[S.charCodeAt(T+1)]<<4|p[S.charCodeAt(T+2)]>>2,_[A++]=B>>8&255,_[A++]=B&255),_}function i(S){return a[S>>18&63]+a[S>>12&63]+a[S>>6&63]+a[S&63]}function t(S,B,k){for(var E,C=[],_=B;_<k;_+=3)E=(S[_]<<16&16711680)+(S[_+1]<<8&65280)+(S[_+2]&255),C.push(i(E));return C.join("")}function d(S){for(var B,k=S.length,E=k%3,C=[],_=16383,A=0,b=k-E;A<b;A+=_)C.push(t(S,A,A+_>b?b:A+_));return E===1?(B=S[k-1],C.push(a[B>>2]+a[B<<4&63]+"==")):E===2&&(B=(S[k-2]<<8)+S[k-1],C.push(a[B>>10]+a[B>>4&63]+a[B<<2&63]+"=")),C.join("")}},"./node_modules/blob/index.js":function(I,v){var l=typeof l<"u"?l:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,a=function(){try{var f=new Blob(["hi"]);return f.size===2}catch{return!1}}(),p=a&&function(){try{var f=new Blob([new Uint8Array([1,2])]);return f.size===2}catch{return!1}}(),h=l&&l.prototype.append&&l.prototype.getBlob;function y(f){return f.map(function(e){if(e.buffer instanceof ArrayBuffer){var o=e.buffer;if(e.byteLength!==o.byteLength){var c=new Uint8Array(e.byteLength);c.set(new Uint8Array(o,e.byteOffset,e.byteLength)),o=c.buffer}return o}return e})}function x(f,e){e=e||{};var o=new l;return y(f).forEach(function(c){o.append(c)}),e.type?o.getBlob(e.type):o.getBlob()}function m(f,e){return new Blob(y(f),e||{})}typeof Blob<"u"&&(x.prototype=Blob.prototype,m.prototype=Blob.prototype),I.exports=function(){return a?p?Blob:m:h?x:void 0}()},"./node_modules/component-bind/index.js":function(I,v){var l=[].slice;I.exports=function(a,p){if(typeof p=="string"&&(p=a[p]),typeof p!="function")throw new Error("bind() requires a function");var h=l.call(arguments,2);return function(){return p.apply(a,h.concat(l.call(arguments)))}}},"./node_modules/component-emitter/index.js":function(I,v,l){I.exports=a;function a(h){if(h)return p(h)}function p(h){for(var y in a.prototype)h[y]=a.prototype[y];return h}a.prototype.on=a.prototype.addEventListener=function(h,y){return this._callbacks=this._callbacks||{},(this._callbacks["$"+h]=this._callbacks["$"+h]||[]).push(y),this},a.prototype.once=function(h,y){function x(){this.off(h,x),y.apply(this,arguments)}return x.fn=y,this.on(h,x),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(h,y){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var x=this._callbacks["$"+h];if(!x)return this;if(arguments.length==1)return delete this._callbacks["$"+h],this;for(var m,f=0;f<x.length;f++)if(m=x[f],m===y||m.fn===y){x.splice(f,1);break}return x.length===0&&delete this._callbacks["$"+h],this},a.prototype.emit=function(h){this._callbacks=this._callbacks||{};for(var y=new Array(arguments.length-1),x=this._callbacks["$"+h],m=1;m<arguments.length;m++)y[m-1]=arguments[m];if(x){x=x.slice(0);for(var m=0,f=x.length;m<f;++m)x[m].apply(this,y)}return this},a.prototype.listeners=function(h){return this._callbacks=this._callbacks||{},this._callbacks["$"+h]||[]},a.prototype.hasListeners=function(h){return!!this.listeners(h).length}},"./node_modules/component-inherit/index.js":function(I,v){I.exports=function(l,a){var p=function(){};p.prototype=a.prototype,l.prototype=new p,l.prototype.constructor=l}},"./node_modules/debug/src/browser.js":function(I,v,l){(function(a){v=I.exports=l("./node_modules/debug/src/debug.js"),v.log=y,v.formatArgs=h,v.save=x,v.load=m,v.useColors=p,v.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:f(),v.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}v.formatters.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};function h(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+v.humanize(this.diff),!!o){var c="color: "+this.color;e.splice(1,0,c,"color: inherit");var i=0,t=0;e[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(i++,d==="%c"&&(t=i))}),e.splice(t,0,c)}}function y(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function x(e){try{e==null?v.storage.removeItem("debug"):v.storage.debug=e}catch{}}function m(){var e;try{e=v.storage.debug}catch{}return!e&&typeof a<"u"&&"env"in a&&(e={}.DEBUG),e}v.enable(m());function f(){try{return window.localStorage}catch{}}}).call(this,l("./node_modules/process/browser.js"))},"./node_modules/debug/src/debug.js":function(I,v,l){v=I.exports=p.debug=p.default=p,v.coerce=f,v.disable=x,v.enable=y,v.enabled=m,v.humanize=l("./node_modules/ms/index.js"),v.instances=[],v.names=[],v.skips=[],v.formatters={};function a(e){var o=0,c;for(c in e)o=(o<<5)-o+e.charCodeAt(c),o|=0;return v.colors[Math.abs(o)%v.colors.length]}function p(e){var o;function c(){if(c.enabled){var i=c,t=+new Date,d=t-(o||t);i.diff=d,i.prev=o,i.curr=t,o=t;for(var S=new Array(arguments.length),B=0;B<S.length;B++)S[B]=arguments[B];S[0]=v.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");var k=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,function(C,_){if(C==="%%")return C;k++;var A=v.formatters[_];if(typeof A=="function"){var b=S[k];C=A.call(i,b),S.splice(k,1),k--}return C}),v.formatArgs.call(i,S);var E=c.log||v.log||console.log.bind(console);E.apply(i,S)}}return c.namespace=e,c.enabled=v.enabled(e),c.useColors=v.useColors(),c.color=a(e),c.destroy=h,typeof v.init=="function"&&v.init(c),v.instances.push(c),c}function h(){var e=v.instances.indexOf(this);return e!==-1?(v.instances.splice(e,1),!0):!1}function y(e){v.save(e),v.names=[],v.skips=[];var o,c=(typeof e=="string"?e:"").split(/[\s,]+/),i=c.length;for(o=0;o<i;o++)c[o]&&(e=c[o].replace(/\*/g,".*?"),e[0]==="-"?v.skips.push(new RegExp("^"+e.substr(1)+"$")):v.names.push(new RegExp("^"+e+"$")));for(o=0;o<v.instances.length;o++){var t=v.instances[o];t.enabled=v.enabled(t.namespace)}}function x(){v.enable("")}function m(e){if(e[e.length-1]==="*")return!0;var o,c;for(o=0,c=v.skips.length;o<c;o++)if(v.skips[o].test(e))return!1;for(o=0,c=v.names.length;o<c;o++)if(v.names[o].test(e))return!0;return!1}function f(e){return e instanceof Error?e.stack||e.message:e}},"./node_modules/decode-uri-component/index.js":function(I,v,l){var a="%[a-f0-9]{2}",p=new RegExp(a,"gi"),h=new RegExp("("+a+")+","gi");function y(f,e){try{return decodeURIComponent(f.join(""))}catch{}if(f.length===1)return f;e=e||1;var o=f.slice(0,e),c=f.slice(e);return Array.prototype.concat.call([],y(o),y(c))}function x(f){try{return decodeURIComponent(f)}catch{for(var e=f.match(p),o=1;o<e.length;o++)f=y(e,o).join(""),e=f.match(p);return f}}function m(f){for(var e={"%FE%FF":"��","%FF%FE":"��"},o=h.exec(f);o;){try{e[o[0]]=decodeURIComponent(o[0])}catch{var c=x(o[0]);c!==o[0]&&(e[o[0]]=c)}o=h.exec(f)}e["%C2"]="�";for(var i=Object.keys(e),t=0;t<i.length;t++){var d=i[t];f=f.replace(new RegExp(d,"g"),e[d])}return f}I.exports=function(f){if(typeof f!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof f+"`");try{return f=f.replace(/\+/g," "),decodeURIComponent(f)}catch{return m(f)}}},"./node_modules/detect-browser/index.js":function(I,v,l){(function(a){var p=this&&this.__spreadArrays||function(){for(var k=0,E=0,C=arguments.length;E<C;E++)k+=arguments[E].length;for(var _=Array(k),A=0,E=0;E<C;E++)for(var b=arguments[E],T=0,N=b.length;T<N;T++,A++)_[A]=b[T];return _};Object.defineProperty(v,"__esModule",{value:!0});var h=function(){function k(E,C,_){this.name=E,this.version=C,this.os=_}return k}();v.BrowserInfo=h;var y=function(){function k(E){this.version=E,this.name="node",this.os=a.platform}return k}();v.NodeInfo=y;var x=function(){function k(){this.bot=!0,this.name="bot",this.version=null,this.os=null}return k}();v.BotInfo=x;var m=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,f=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,e=3,o=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",m]],c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",f]];function i(k){return k?t(k):typeof navigator<"u"?t(navigator.userAgent):S()}v.detect=i;function t(k){var E=k!==""&&o.reduce(function(b,T){var N=T[0],O=T[1];if(b)return b;var U=O.exec(k);return!!U&&[N,U]},!1);if(!E)return null;var C=E[0],_=E[1];if(C==="searchbot")return new x;var A=_[1]&&_[1].split(/[._]/).slice(0,3);return A?A.length<e&&(A=p(A,B(e-A.length))):A=[],new h(C,A.join("."),d(k))}v.parseUserAgent=t;function d(k){for(var E=0,C=c.length;E<C;E++){var _=c[E],A=_[0],b=_[1],T=b.test(k);if(T)return A}return null}v.detectOS=d;function S(){var k=typeof a<"u"&&a.version;return k?new y(a.version.slice(1)):null}v.getNodeVersion=S;function B(k){for(var E=[],C=0;C<k;C++)E.push("0");return E}}).call(this,l("./node_modules/process/browser.js"))},"./node_modules/engine.io-client/lib/globalThis.browser.js":function(I,v){I.exports=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}()},"./node_modules/engine.io-client/lib/index.js":function(I,v,l){I.exports=l("./node_modules/engine.io-client/lib/socket.js"),I.exports.parser=l("./node_modules/engine.io-parser/lib/browser.js")},"./node_modules/engine.io-client/lib/socket.js":function(I,v,l){var a=l("./node_modules/engine.io-client/lib/transports/index.js"),p=l("./node_modules/component-emitter/index.js"),h=l("./node_modules/debug/src/browser.js")("engine.io-client:socket"),y=l("./node_modules/indexof/index.js"),x=l("./node_modules/engine.io-parser/lib/browser.js"),m=l("./node_modules/parseuri/index.js"),f=l("./node_modules/parseqs/index.js");I.exports=e;function e(c,i){if(!(this instanceof e))return new e(c,i);i=i||{},c&&typeof c=="object"&&(i=c,c=null),c?(c=m(c),i.hostname=c.host,i.secure=c.protocol==="https"||c.protocol==="wss",i.port=c.port,c.query&&(i.query=c.query)):i.host&&(i.hostname=m(i.host).host),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.agent=i.agent||!1,this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=i.query||{},typeof this.query=="string"&&(this.query=f.decode(this.query)),this.upgrade=i.upgrade!==!1,this.path=(i.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!i.forceJSONP,this.jsonp=i.jsonp!==!1,this.forceBase64=!!i.forceBase64,this.enablesXDR=!!i.enablesXDR,this.withCredentials=i.withCredentials!==!1,this.timestampParam=i.timestampParam||"t",this.timestampRequests=i.timestampRequests,this.transports=i.transports||["polling","websocket"],this.transportOptions=i.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=i.policyPort||843,this.rememberUpgrade=i.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=i.onlyBinaryUpgrades,this.perMessageDeflate=i.perMessageDeflate!==!1?i.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=i.pfx||void 0,this.key=i.key||void 0,this.passphrase=i.passphrase||void 0,this.cert=i.cert||void 0,this.ca=i.ca||void 0,this.ciphers=i.ciphers||void 0,this.rejectUnauthorized=i.rejectUnauthorized===void 0?!0:i.rejectUnauthorized,this.forceNode=!!i.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(i.extraHeaders&&Object.keys(i.extraHeaders).length>0&&(this.extraHeaders=i.extraHeaders),i.localAddress&&(this.localAddress=i.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.priorWebsocketSuccess=!1,p(e.prototype),e.protocol=x.protocol,e.Socket=e,e.Transport=l("./node_modules/engine.io-client/lib/transport.js"),e.transports=l("./node_modules/engine.io-client/lib/transports/index.js"),e.parser=l("./node_modules/engine.io-parser/lib/browser.js"),e.prototype.createTransport=function(c){h('creating transport "%s"',c);var i=o(this.query);i.EIO=x.protocol,i.transport=c;var t=this.transportOptions[c]||{};this.id&&(i.sid=this.id);var d=new a[c]({query:i,socket:this,agent:t.agent||this.agent,hostname:t.hostname||this.hostname,port:t.port||this.port,secure:t.secure||this.secure,path:t.path||this.path,forceJSONP:t.forceJSONP||this.forceJSONP,jsonp:t.jsonp||this.jsonp,forceBase64:t.forceBase64||this.forceBase64,enablesXDR:t.enablesXDR||this.enablesXDR,withCredentials:t.withCredentials||this.withCredentials,timestampRequests:t.timestampRequests||this.timestampRequests,timestampParam:t.timestampParam||this.timestampParam,policyPort:t.policyPort||this.policyPort,pfx:t.pfx||this.pfx,key:t.key||this.key,passphrase:t.passphrase||this.passphrase,cert:t.cert||this.cert,ca:t.ca||this.ca,ciphers:t.ciphers||this.ciphers,rejectUnauthorized:t.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:t.perMessageDeflate||this.perMessageDeflate,extraHeaders:t.extraHeaders||this.extraHeaders,forceNode:t.forceNode||this.forceNode,localAddress:t.localAddress||this.localAddress,requestTimeout:t.requestTimeout||this.requestTimeout,protocols:t.protocols||void 0,isReactNative:this.isReactNative});return d};function o(c){var i={};for(var t in c)c.hasOwnProperty(t)&&(i[t]=c[t]);return i}e.prototype.open=function(){var c;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)c="websocket";else if(this.transports.length===0){var i=this;setTimeout(function(){i.emit("error","No transports available")},0);return}else c=this.transports[0];this.readyState="opening";try{c=this.createTransport(c)}catch{this.transports.shift(),this.open();return}c.open(),this.setTransport(c)},e.prototype.setTransport=function(c){h("setting transport %s",c.name);var i=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=c,c.on("drain",function(){i.onDrain()}).on("packet",function(t){i.onPacket(t)}).on("error",function(t){i.onError(t)}).on("close",function(){i.onClose("transport close")})},e.prototype.probe=function(c){h('probing transport "%s"',c);var i=this.createTransport(c,{probe:1}),t=!1,d=this;e.priorWebsocketSuccess=!1;function S(){if(d.onlyBinaryUpgrades){var b=!this.supportsBinary&&d.transport.supportsBinary;t=t||b}t||(h('probe transport "%s" opened',c),i.send([{type:"ping",data:"probe"}]),i.once("packet",function(T){if(!t)if(T.type==="pong"&&T.data==="probe"){if(h('probe transport "%s" pong',c),d.upgrading=!0,d.emit("upgrading",i),!i)return;e.priorWebsocketSuccess=i.name==="websocket",h('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){t||d.readyState!=="closed"&&(h("changing transport and sending upgrade packet"),A(),d.setTransport(i),i.send([{type:"upgrade"}]),d.emit("upgrade",i),i=null,d.upgrading=!1,d.flush())})}else{h('probe transport "%s" failed',c);var N=new Error("probe error");N.transport=i.name,d.emit("upgradeError",N)}}))}function B(){t||(t=!0,A(),i.close(),i=null)}function k(b){var T=new Error("probe error: "+b);T.transport=i.name,B(),h('probe transport "%s" failed because of error: %s',c,b),d.emit("upgradeError",T)}function E(){k("transport closed")}function C(){k("socket closed")}function _(b){i&&b.name!==i.name&&(h('"%s" works - aborting "%s"',b.name,i.name),B())}function A(){i.removeListener("open",S),i.removeListener("error",k),i.removeListener("close",E),d.removeListener("close",C),d.removeListener("upgrading",_)}i.once("open",S),i.once("error",k),i.once("close",E),this.once("close",C),this.once("upgrading",_),i.open()},e.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",e.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var c=0,i=this.upgrades.length;c<i;c++)this.probe(this.upgrades[c])}},e.prototype.onPacket=function(c){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(h('socket receive: type "%s", data "%s"',c.type,c.data),this.emit("packet",c),this.emit("heartbeat"),c.type){case"open":this.onHandshake(JSON.parse(c.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var i=new Error("server error");i.code=c.data,this.onError(i);break;case"message":this.emit("data",c.data),this.emit("message",c.data);break}else h('packet received with socket readyState "%s"',this.readyState)},e.prototype.onHandshake=function(c){this.emit("handshake",c),this.id=c.sid,this.transport.query.sid=c.sid,this.upgrades=this.filterUpgrades(c.upgrades),this.pingInterval=c.pingInterval,this.pingTimeout=c.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(c){clearTimeout(this.pingTimeoutTimer);var i=this;i.pingTimeoutTimer=setTimeout(function(){i.readyState!=="closed"&&i.onClose("ping timeout")},c||i.pingInterval+i.pingTimeout)},e.prototype.setPing=function(){var c=this;clearTimeout(c.pingIntervalTimer),c.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",c.pingTimeout),c.ping(),c.onHeartbeat(c.pingTimeout)},c.pingInterval)},e.prototype.ping=function(){var c=this;this.sendPacket("ping",function(){c.emit("ping")})},e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},e.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(c,i,t){return this.sendPacket("message",c,i,t),this},e.prototype.sendPacket=function(c,i,t,d){if(typeof i=="function"&&(d=i,i=void 0),typeof t=="function"&&(d=t,t=null),!(this.readyState==="closing"||this.readyState==="closed")){t=t||{},t.compress=t.compress!==!1;var S={type:c,data:i,options:t};this.emit("packetCreate",S),this.writeBuffer.push(S),d&&this.once("flush",d),this.flush()}},e.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var c=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?d():i()}):this.upgrading?d():i()}function i(){c.onClose("forced close"),h("socket closing - telling transport to close"),c.transport.close()}function t(){c.removeListener("upgrade",t),c.removeListener("upgradeError",t),i()}function d(){c.once("upgrade",t),c.once("upgradeError",t)}return this},e.prototype.onError=function(c){h("socket error %j",c),e.priorWebsocketSuccess=!1,this.emit("error",c),this.onClose("transport error",c)},e.prototype.onClose=function(c,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){h('socket close with reason: "%s"',c);var t=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",c,i),t.writeBuffer=[],t.prevBufferLen=0}},e.prototype.filterUpgrades=function(c){for(var i=[],t=0,d=c.length;t<d;t++)~y(this.transports,c[t])&&i.push(c[t]);return i}},"./node_modules/engine.io-client/lib/transport.js":function(I,v,l){var a=l("./node_modules/engine.io-parser/lib/browser.js"),p=l("./node_modules/component-emitter/index.js");I.exports=h;function h(y){this.path=y.path,this.hostname=y.hostname,this.port=y.port,this.secure=y.secure,this.query=y.query,this.timestampParam=y.timestampParam,this.timestampRequests=y.timestampRequests,this.readyState="",this.agent=y.agent||!1,this.socket=y.socket,this.enablesXDR=y.enablesXDR,this.withCredentials=y.withCredentials,this.pfx=y.pfx,this.key=y.key,this.passphrase=y.passphrase,this.cert=y.cert,this.ca=y.ca,this.ciphers=y.ciphers,this.rejectUnauthorized=y.rejectUnauthorized,this.forceNode=y.forceNode,this.isReactNative=y.isReactNative,this.extraHeaders=y.extraHeaders,this.localAddress=y.localAddress}p(h.prototype),h.prototype.onError=function(y,x){var m=new Error(y);return m.type="TransportError",m.description=x,this.emit("error",m),this},h.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},h.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},h.prototype.send=function(y){if(this.readyState==="open")this.write(y);else throw new Error("Transport not open")},h.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},h.prototype.onData=function(y){var x=a.decodePacket(y,this.socket.binaryType);this.onPacket(x)},h.prototype.onPacket=function(y){this.emit("packet",y)},h.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},"./node_modules/engine.io-client/lib/transports/index.js":function(I,v,l){var a=l("./node_modules/engine.io-client/lib/xmlhttprequest.js"),p=l("./node_modules/engine.io-client/lib/transports/polling-xhr.js"),h=l("./node_modules/engine.io-client/lib/transports/polling-jsonp.js"),y=l("./node_modules/engine.io-client/lib/transports/websocket.js");v.polling=x,v.websocket=y;function x(m){var f,e=!1,o=!1,c=m.jsonp!==!1;if(typeof location<"u"){var i=location.protocol==="https:",t=location.port;t||(t=i?443:80),e=m.hostname!==location.hostname||t!==m.port,o=m.secure!==i}if(m.xdomain=e,m.xscheme=o,f=new a(m),"open"in f&&!m.forceJSONP)return new p(m);if(!c)throw new Error("JSONP disabled");return new h(m)}},"./node_modules/engine.io-client/lib/transports/polling-jsonp.js":function(I,v,l){var a=l("./node_modules/engine.io-client/lib/transports/polling.js"),p=l("./node_modules/component-inherit/index.js"),h=l("./node_modules/engine.io-client/lib/globalThis.browser.js");I.exports=e;var y=/\n/g,x=/\\n/g,m;function f(){}function e(o){a.call(this,o),this.query=this.query||{},m||(m=h.___eio=h.___eio||[]),this.index=m.length;var c=this;m.push(function(i){c.onData(i)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=f)},!1)}p(e,a),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),a.prototype.doClose.call(this)},e.prototype.doPoll=function(){var o=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),c.async=!0,c.src=this.uri(),c.onerror=function(d){o.onError("jsonp poll error",d)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(c,i):(document.head||document.body).appendChild(c),this.script=c;var t=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);t&&setTimeout(function(){var d=document.createElement("iframe");document.body.appendChild(d),document.body.removeChild(d)},100)},e.prototype.doWrite=function(o,c){var i=this;if(!this.form){var t=document.createElement("form"),d=document.createElement("textarea"),S=this.iframeId="eio_iframe_"+this.index,B;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=S,t.method="POST",t.setAttribute("accept-charset","utf-8"),d.name="d",t.appendChild(d),document.body.appendChild(t),this.form=t,this.area=d}this.form.action=this.uri();function k(){E(),c()}function E(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(_){i.onError("jsonp polling iframe removal error",_)}try{var C='<iframe src="javascript:0" name="'+i.iframeId+'">';B=document.createElement(C)}catch{B=document.createElement("iframe"),B.name=i.iframeId,B.src="javascript:0"}B.id=i.iframeId,i.form.appendChild(B),i.iframe=B}E(),o=o.replace(x,`\\
`),this.area.value=o.replace(y,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){i.iframe.readyState==="complete"&&k()}:this.iframe.onload=k}},"./node_modules/engine.io-client/lib/transports/polling-xhr.js":function(I,v,l){var a=l("./node_modules/engine.io-client/lib/xmlhttprequest.js"),p=l("./node_modules/engine.io-client/lib/transports/polling.js"),h=l("./node_modules/component-emitter/index.js"),y=l("./node_modules/component-inherit/index.js"),x=l("./node_modules/debug/src/browser.js")("engine.io-client:polling-xhr"),m=l("./node_modules/engine.io-client/lib/globalThis.browser.js");I.exports=e,I.exports.Request=o;function f(){}function e(t){if(p.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location<"u"){var d=location.protocol==="https:",S=location.port;S||(S=d?443:80),this.xd=typeof location<"u"&&t.hostname!==location.hostname||S!==t.port,this.xs=t.secure!==d}}y(e,p),e.prototype.supportsBinary=!0,e.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new o(t)},e.prototype.doWrite=function(t,d){var S=typeof t!="string"&&t!==void 0,B=this.request({method:"POST",data:t,isBinary:S}),k=this;B.on("success",d),B.on("error",function(E){k.onError("xhr post error",E)}),this.sendXhr=B},e.prototype.doPoll=function(){x("xhr poll");var t=this.request(),d=this;t.on("data",function(S){d.onData(S)}),t.on("error",function(S){d.onError("xhr poll error",S)}),this.pollXhr=t};function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(h(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new a(t),S=this;try{x("xhr open %s: %s",this.method,this.uri),d.open(this.method,this.uri,this.async);try{if(this.extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var B in this.extraHeaders)this.extraHeaders.hasOwnProperty(B)&&d.setRequestHeader(B,this.extraHeaders[B])}}catch{}if(this.method==="POST")try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{d.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in d&&(d.withCredentials=this.withCredentials),this.requestTimeout&&(d.timeout=this.requestTimeout),this.hasXDR()?(d.onload=function(){S.onLoad()},d.onerror=function(){S.onError(d.responseText)}):d.onreadystatechange=function(){if(d.readyState===2)try{var k=d.getResponseHeader("Content-Type");(S.supportsBinary&&k==="application/octet-stream"||k==="application/octet-stream; charset=UTF-8")&&(d.responseType="arraybuffer")}catch{}d.readyState===4&&(d.status===200||d.status===1223?S.onLoad():setTimeout(function(){S.onError(typeof d.status=="number"?d.status:0)},0))},x("xhr data %s",this.data),d.send(this.data)}catch(k){setTimeout(function(){S.onError(k)},0);return}typeof document<"u"&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=f:this.xhr.onreadystatechange=f,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var d;try{d=this.xhr.getResponseHeader("Content-Type")}catch{}d==="application/octet-stream"||d==="application/octet-stream; charset=UTF-8"?t=this.xhr.response||this.xhr.responseText:t=this.xhr.responseText}catch(S){this.onError(S)}t!=null&&this.onData(t)},o.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",i);else if(typeof addEventListener=="function"){var c="onpagehide"in m?"pagehide":"unload";addEventListener(c,i,!1)}}function i(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}},"./node_modules/engine.io-client/lib/transports/polling.js":function(I,v,l){var a=l("./node_modules/engine.io-client/lib/transport.js"),p=l("./node_modules/parseqs/index.js"),h=l("./node_modules/engine.io-parser/lib/browser.js"),y=l("./node_modules/component-inherit/index.js"),x=l("./node_modules/yeast/index.js"),m=l("./node_modules/debug/src/browser.js")("engine.io-client:polling");I.exports=e;var f=function(){var o=l("./node_modules/engine.io-client/lib/xmlhttprequest.js"),c=new o({xdomain:!1});return c.responseType!=null}();function e(o){var c=o&&o.forceBase64;(!f||c)&&(this.supportsBinary=!1),a.call(this,o)}y(e,a),e.prototype.name="polling",e.prototype.doOpen=function(){this.poll()},e.prototype.pause=function(o){var c=this;this.readyState="pausing";function i(){m("paused"),c.readyState="paused",o()}if(this.polling||!this.writable){var t=0;this.polling&&(m("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){m("pre-pause polling complete"),--t||i()})),this.writable||(m("we are currently writing - waiting to pause"),t++,this.once("drain",function(){m("pre-pause writing complete"),--t||i()}))}else i()},e.prototype.poll=function(){m("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},e.prototype.onData=function(o){var c=this;m("polling got data %s",o);var i=function(t,d,S){if(c.readyState==="opening"&&t.type==="open"&&c.onOpen(),t.type==="close")return c.onClose(),!1;c.onPacket(t)};h.decodePayload(o,this.socket.binaryType,i),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():m('ignoring poll - transport state "%s"',this.readyState))},e.prototype.doClose=function(){var o=this;function c(){m("writing close packet"),o.write([{type:"close"}])}this.readyState==="open"?(m("transport open - closing"),c()):(m("transport not open - deferring close"),this.once("open",c))},e.prototype.write=function(o){var c=this;this.writable=!1;var i=function(){c.writable=!0,c.emit("drain")};h.encodePayload(o,this.supportsBinary,function(t){c.doWrite(t,i)})},e.prototype.uri=function(){var o=this.query||{},c=this.secure?"https":"http",i="";this.timestampRequests!==!1&&(o[this.timestampParam]=x()),!this.supportsBinary&&!o.sid&&(o.b64=1),o=p.encode(o),this.port&&(c==="https"&&Number(this.port)!==443||c==="http"&&Number(this.port)!==80)&&(i=":"+this.port),o.length&&(o="?"+o);var t=this.hostname.indexOf(":")!==-1;return c+"://"+(t?"["+this.hostname+"]":this.hostname)+i+this.path+o}},"./node_modules/engine.io-client/lib/transports/websocket.js":function(I,v,l){(function(a){var p=l("./node_modules/engine.io-client/lib/transport.js"),h=l("./node_modules/engine.io-parser/lib/browser.js"),y=l("./node_modules/parseqs/index.js"),x=l("./node_modules/component-inherit/index.js"),m=l("./node_modules/yeast/index.js"),f=l("./node_modules/debug/src/browser.js")("engine.io-client:websocket"),e,o;if(typeof WebSocket<"u"?e=WebSocket:typeof self<"u"&&(e=self.WebSocket||self.MozWebSocket),typeof window>"u")try{o=l(0)}catch{}var c=e||o;I.exports=i;function i(t){var d=t&&t.forceBase64;d&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=e&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(c=o),p.call(this,t)}x(i,p),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var t=this.uri(),d=this.protocols,S={};this.isReactNative||(S.agent=this.agent,S.perMessageDeflate=this.perMessageDeflate,S.pfx=this.pfx,S.key=this.key,S.passphrase=this.passphrase,S.cert=this.cert,S.ca=this.ca,S.ciphers=this.ciphers,S.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(S.headers=this.extraHeaders),this.localAddress&&(S.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?d?new c(t,d):new c(t):new c(t,d,S)}catch(B){return this.emit("error",B)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(d){t.onData(d.data)},this.ws.onerror=function(d){t.onError("websocket error",d)}},i.prototype.write=function(t){var d=this;this.writable=!1;for(var S=t.length,B=0,k=S;B<k;B++)(function(C){h.encodePacket(C,d.supportsBinary,function(_){if(!d.usingBrowserWebSocket){var A={};if(C.options&&(A.compress=C.options.compress),d.perMessageDeflate){var b=typeof _=="string"?a.byteLength(_):_.length;b<d.perMessageDeflate.threshold&&(A.compress=!1)}}try{d.usingBrowserWebSocket?d.ws.send(_):d.ws.send(_,A)}catch{f("websocket closed before onclose event")}--S||E()})})(t[B]);function E(){d.emit("flush"),setTimeout(function(){d.writable=!0,d.emit("drain")},0)}},i.prototype.onClose=function(){p.prototype.onClose.call(this)},i.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},i.prototype.uri=function(){var t=this.query||{},d=this.secure?"wss":"ws",S="";this.port&&(d==="wss"&&Number(this.port)!==443||d==="ws"&&Number(this.port)!==80)&&(S=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=m()),this.supportsBinary||(t.b64=1),t=y.encode(t),t.length&&(t="?"+t);var B=this.hostname.indexOf(":")!==-1;return d+"://"+(B?"["+this.hostname+"]":this.hostname)+S+this.path+t},i.prototype.check=function(){return!!c&&!("__initialize"in c&&this.name===i.prototype.name)}}).call(this,l("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/engine.io-client/lib/xmlhttprequest.js":function(I,v,l){var a=l("./node_modules/has-cors/index.js"),p=l("./node_modules/engine.io-client/lib/globalThis.browser.js");I.exports=function(h){var y=h.xdomain,x=h.xscheme,m=h.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!y||a))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!x&&m)return new XDomainRequest}catch{}if(!y)try{return new p[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},"./node_modules/engine.io-parser/lib/browser.js":function(I,v,l){var a=l("./node_modules/engine.io-parser/lib/keys.js"),p=l("./node_modules/has-binary2/index.js"),h=l("./node_modules/arraybuffer.slice/index.js"),y=l("./node_modules/after/index.js"),x=l("./node_modules/engine.io-parser/lib/utf8.js"),m;typeof ArrayBuffer<"u"&&(m=l("./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"));var f=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),e=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),o=f||e;v.protocol=3;var c=v.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},i=a(c),t={type:"error",data:"parser error"},d=l("./node_modules/blob/index.js");v.encodePacket=function(A,b,T,N){typeof b=="function"&&(N=b,b=!1),typeof T=="function"&&(N=T,T=null);var O=A.data===void 0?void 0:A.data.buffer||A.data;if(typeof ArrayBuffer<"u"&&O instanceof ArrayBuffer)return B(A,b,N);if(typeof d<"u"&&O instanceof d)return E(A,b,N);if(O&&O.base64)return S(A,N);var U=c[A.type];return A.data!==void 0&&(U+=T?x.encode(String(A.data),{strict:!1}):String(A.data)),N(""+U)};function S(A,b){var T="b"+v.packets[A.type]+A.data.data;return b(T)}function B(A,b,T){if(!b)return v.encodeBase64Packet(A,T);var N=A.data,O=new Uint8Array(N),U=new Uint8Array(1+N.byteLength);U[0]=c[A.type];for(var V=0;V<O.length;V++)U[V+1]=O[V];return T(U.buffer)}function k(A,b,T){if(!b)return v.encodeBase64Packet(A,T);var N=new FileReader;return N.onload=function(){v.encodePacket({type:A.type,data:N.result},b,!0,T)},N.readAsArrayBuffer(A.data)}function E(A,b,T){if(!b)return v.encodeBase64Packet(A,T);if(o)return k(A,b,T);var N=new Uint8Array(1);N[0]=c[A.type];var O=new d([N.buffer,A.data]);return T(O)}v.encodeBase64Packet=function(A,b){var T="b"+v.packets[A.type];if(typeof d<"u"&&A.data instanceof d){var N=new FileReader;return N.onload=function(){var P=N.result.split(",")[1];b(T+P)},N.readAsDataURL(A.data)}var O;try{O=String.fromCharCode.apply(null,new Uint8Array(A.data))}catch{for(var U=new Uint8Array(A.data),V=new Array(U.length),L=0;L<U.length;L++)V[L]=U[L];O=String.fromCharCode.apply(null,V)}return T+=btoa(O),b(T)},v.decodePacket=function(A,b,T){if(A===void 0)return t;if(typeof A=="string"){if(A.charAt(0)==="b")return v.decodeBase64Packet(A.substr(1),b);if(T&&(A=C(A),A===!1))return t;var O=A.charAt(0);return Number(O)!=O||!i[O]?t:A.length>1?{type:i[O],data:A.substring(1)}:{type:i[O]}}var N=new Uint8Array(A),O=N[0],U=h(A,1);return d&&b==="blob"&&(U=new d([U])),{type:i[O],data:U}};function C(A){try{A=x.decode(A,{strict:!1})}catch{return!1}return A}v.decodeBase64Packet=function(A,b){var T=i[A.charAt(0)];if(!m)return{type:T,data:{base64:!0,data:A.substr(1)}};var N=m.decode(A.substr(1));return b==="blob"&&d&&(N=new d([N])),{type:T,data:N}},v.encodePayload=function(A,b,T){typeof b=="function"&&(T=b,b=null);var N=p(A);if(b&&N)return d&&!o?v.encodePayloadAsBlob(A,T):v.encodePayloadAsArrayBuffer(A,T);if(!A.length)return T("0:");function O(V){return V.length+":"+V}function U(V,L){v.encodePacket(V,N?b:!1,!1,function(P){L(null,O(P))})}_(A,U,function(V,L){return T(L.join(""))})};function _(A,b,T){for(var N=new Array(A.length),O=y(A.length,T),U=function(L,P,W){b(P,function(G,Y){N[L]=Y,W(G,N)})},V=0;V<A.length;V++)U(V,A[V],O)}v.decodePayload=function(A,b,T){if(typeof A!="string")return v.decodePayloadAsBinary(A,b,T);typeof b=="function"&&(T=b,b=null);var N;if(A==="")return T(t,0,1);for(var O="",U,V,L=0,P=A.length;L<P;L++){var W=A.charAt(L);if(W!==":"){O+=W;continue}if(O===""||O!=(U=Number(O))||(V=A.substr(L+1,U),O!=V.length))return T(t,0,1);if(V.length){if(N=v.decodePacket(V,b,!1),t.type===N.type&&t.data===N.data)return T(t,0,1);var G=T(N,L+U,P);if(G===!1)return}L+=U,O=""}if(O!=="")return T(t,0,1)},v.encodePayloadAsArrayBuffer=function(A,b){if(!A.length)return b(new ArrayBuffer(0));function T(N,O){v.encodePacket(N,!0,!0,function(U){return O(null,U)})}_(A,T,function(N,O){var U=O.reduce(function(P,W){var G;return typeof W=="string"?G=W.length:G=W.byteLength,P+G.toString().length+G+2},0),V=new Uint8Array(U),L=0;return O.forEach(function(P){var W=typeof P=="string",G=P;if(W){for(var se=new Uint8Array(P.length),Y=0;Y<P.length;Y++)se[Y]=P.charCodeAt(Y);G=se.buffer}W?V[L++]=0:V[L++]=1;for(var ne=G.byteLength.toString(),Y=0;Y<ne.length;Y++)V[L++]=parseInt(ne[Y]);V[L++]=255;for(var se=new Uint8Array(G),Y=0;Y<se.length;Y++)V[L++]=se[Y]}),b(V.buffer)})},v.encodePayloadAsBlob=function(A,b){function T(N,O){v.encodePacket(N,!0,!0,function(U){var V=new Uint8Array(1);if(V[0]=1,typeof U=="string"){for(var L=new Uint8Array(U.length),P=0;P<U.length;P++)L[P]=U.charCodeAt(P);U=L.buffer,V[0]=0}for(var W=U instanceof ArrayBuffer?U.byteLength:U.size,G=W.toString(),Y=new Uint8Array(G.length+1),P=0;P<G.length;P++)Y[P]=parseInt(G[P]);if(Y[G.length]=255,d){var ne=new d([V.buffer,Y.buffer,U]);O(null,ne)}})}_(A,T,function(N,O){return b(new d(O))})},v.decodePayloadAsBinary=function(A,b,T){typeof b=="function"&&(T=b,b=null);for(var N=A,O=[];N.byteLength>0;){for(var U=new Uint8Array(N),V=U[0]===0,L="",P=1;U[P]!==255;P++){if(L.length>310)return T(t,0,1);L+=U[P]}N=h(N,2+L.length),L=parseInt(L);var W=h(N,0,L);if(V)try{W=String.fromCharCode.apply(null,new Uint8Array(W))}catch{var G=new Uint8Array(W);W="";for(var P=0;P<G.length;P++)W+=String.fromCharCode(G[P])}O.push(W),N=h(N,L)}var Y=O.length;O.forEach(function(ne,se){T(v.decodePacket(ne,b,!0),se,Y)})}},"./node_modules/engine.io-parser/lib/keys.js":function(I,v){I.exports=Object.keys||function(a){var p=[],h=Object.prototype.hasOwnProperty;for(var y in a)h.call(a,y)&&p.push(y);return p}},"./node_modules/engine.io-parser/lib/utf8.js":function(I,v){/*! https://mths.be/utf8js v2.1.2 by @mathias */var l=String.fromCharCode;function a(d){for(var S=[],B=0,k=d.length,E,C;B<k;)E=d.charCodeAt(B++),E>=55296&&E<=56319&&B<k?(C=d.charCodeAt(B++),(C&64512)==56320?S.push(((E&1023)<<10)+(C&1023)+65536):(S.push(E),B--)):S.push(E);return S}function p(d){for(var S=d.length,B=-1,k,E="";++B<S;)k=d[B],k>65535&&(k-=65536,E+=l(k>>>10&1023|55296),k=56320|k&1023),E+=l(k);return E}function h(d,S){if(d>=55296&&d<=57343){if(S)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function y(d,S){return l(d>>S&63|128)}function x(d,S){if(!(d&4294967168))return l(d);var B="";return d&4294965248?d&4294901760?d&4292870144||(B=l(d>>18&7|240),B+=y(d,12),B+=y(d,6)):(h(d,S)||(d=65533),B=l(d>>12&15|224),B+=y(d,6)):B=l(d>>6&31|192),B+=l(d&63|128),B}function m(d,S){S=S||{};for(var B=S.strict!==!1,k=a(d),E=k.length,C=-1,_,A="";++C<E;)_=k[C],A+=x(_,B);return A}function f(){if(i>=c)throw Error("Invalid byte index");var d=o[i]&255;if(i++,(d&192)==128)return d&63;throw Error("Invalid continuation byte")}function e(d){var S,B,k,E,C;if(i>c)throw Error("Invalid byte index");if(i==c)return!1;if(S=o[i]&255,i++,!(S&128))return S;if((S&224)==192){if(B=f(),C=(S&31)<<6|B,C>=128)return C;throw Error("Invalid continuation byte")}if((S&240)==224){if(B=f(),k=f(),C=(S&15)<<12|B<<6|k,C>=2048)return h(C,d)?C:65533;throw Error("Invalid continuation byte")}if((S&248)==240&&(B=f(),k=f(),E=f(),C=(S&7)<<18|B<<12|k<<6|E,C>=65536&&C<=1114111))return C;throw Error("Invalid UTF-8 detected")}var o,c,i;function t(d,S){S=S||{};var B=S.strict!==!1;o=a(d),c=o.length,i=0;for(var k=[],E;(E=e(B))!==!1;)k.push(E);return p(k)}I.exports={version:"2.1.2",encode:m,decode:t}},"./node_modules/enum/lib/enum.js":function(I,v,l){l.r(v),(function(a){l.d(v,"default",function(){return e});var p=l("./node_modules/enum/lib/enumItem.js"),h=l("./node_modules/enum/lib/isType.js"),y=l("./node_modules/enum/lib/indexOf.js");const x=i=>i!=null&&i.constructor!=null&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i),f=(()=>{const i=new ArrayBuffer(2);return new DataView(i).setInt16(0,256,!0),new Int16Array(i)[0]===256?"LE":"BE"})();class e{constructor(t,d){if(this.size=4,this.indirection=1,d&&Object(h.isString)(d)&&(d={name:d}),this._options=d||{},this._options.separator=this._options.separator||" | ",this._options.endianness=this._options.endianness||f,this._options.ignoreCase=this._options.ignoreCase||!1,this._options.freez=this._options.freez||!1,this._options.freeze=this._options.freeze||this._options.freez||!1,this.enums=[],t.length){this._enumLastIndex=t.length;var S=t;t={};for(var B=0;B<S.length;B++)t[S[B]]=Math.pow(2,B)}for(var k in t)c(this._options.name,k),this[k]=new p.default(k,t[k],{ignoreCase:this._options.ignoreCase}),this.enums.push(this[k]);this._enumMap=t,this._options.ignoreCase&&(this.getLowerCaseEnums=function(){for(var C={},_=0,A=this.enums.length;_<A;_++)C[this.enums[_].key.toLowerCase()]=this.enums[_];return C}),this._options.name&&(this.name=this._options.name);const E=()=>{for(var C=0,_=this.enums.length;C<_;C++){var A=this.enums[C];if(!(A.value!==0&&!(A.value&A.value-1)))return!1}return!0};this.isFlaggable=E(),this._options.freeze&&this.freezeEnums()}getKey(t){var d=this.get(t);if(d)return d.key}getValue(t){var d=this.get(t);if(d)return d.value}get(t,d){if(t!=null)if(x(t)&&(t=t["readUInt32"+this._options.endianness](d||0)),p.default.isEnumItem(t)){var S=y.indexOf.call(this.enums,t);return S>=0?t:!this.isFlaggable||this.isFlaggable&&t.key.indexOf(this._options.separator)<0?void 0:this.get(t.key)}else if(Object(h.isString)(t)){var B=this;if(this._options.ignoreCase&&(B=this.getLowerCaseEnums(),t=t.toLowerCase()),t.indexOf(this._options.separator)>0){for(var k=t.split(this._options.separator),E=0,C=0;C<k.length;C++){var _=k[C];E|=B[_].value}return new p.default(t,E)}else return B[t]}else{for(var A in this)if(this.hasOwnProperty(A)&&this[A].value===t)return this[A];var b=null;if(this.isFlaggable)for(var T in this)this.hasOwnProperty(T)&&t&this[T].value&&(b?b+=this._options.separator:b="",b+=T);return this.get(b||null)}}set(t,d,S){var B=this.get(S);if(B)return t["writeUInt32"+this._options.endianness](B.value,d||0)}freezeEnums(){function t(){return Object.isFrozen&&Object.isSealed&&Object.getOwnPropertyNames&&Object.getOwnPropertyDescriptor&&Object.defineProperties&&Object.__defineGetter__&&Object.__defineSetter__}function d(k){var E=Object.getOwnPropertyNames(k);return E.forEach(function(C){Object.getOwnPropertyDescriptor(k,C).configurable&&Object.defineProperties(k,C,{writable:!1,configurable:!1})}),k}function S(k){return k}function B(k){if(!(typeof k!="object"||k===null||Object.isFrozen(k)||Object.isSealed(k))){for(var E in k)k.hasOwnProperty(E)&&(k.__defineGetter__(E,S.bind(null,k[E])),k.__defineSetter__(E,function(_){throw TypeError("Cannot redefine property; Enum Type is not extensible.")}),B(k[E]));Object.freeze?Object.freeze(k):d(k)}}return t()&&B(this),this}isDefined(t){let d=S=>S===t;return(Object(h.isString)(t)||Object(h.isNumber)(t))&&(d=S=>S.is(t)),this.enums.some(d)}toJSON(){return this._enumMap}extend(t){if(t.length){var d=t;t={};for(var S=0;S<d.length;S++){var B=this._enumLastIndex+S;t[d[S]]=Math.pow(2,B)}for(var k in t)c(this._options.name,k),this[k]=new p.default(k,t[k],{ignoreCase:this._options.ignoreCase}),this.enums.push(this[k]);for(var E in this._enumMap)t[E]=this._enumMap[E];this._enumLastIndex+=t.length,this._enumMap=t,this._options.freeze&&this.freezeEnums()}}static register(t="Enum"){typeof a<"u"&&!a[t]?a[t]=e:typeof window<"u"&&!window[t]&&(window[t]=e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.enums.length?{done:!1,value:this.enums[t++]}:{done:!0}}}}var o=["_options","get","getKey","getValue","enums","isFlaggable","_enumMap","toJSON","_enumLastIndex"];function c(i,t){if(i&&t==="name"||y.indexOf.call(o,t)>=0)throw new Error(`Enum key ${t} is a reserved word!`)}}).call(this,l("./node_modules/webpack/buildin/global.js"))},"./node_modules/enum/lib/enumItem.js":function(I,v,l){l.r(v),l.d(v,"default",function(){return p});var a=l("./node_modules/enum/lib/isType.js");class p{constructor(y,x,m={}){this.key=y,this.value=x,this._options=m,this._options.ignoreCase=this._options.ignoreCase||!1}has(y){return p.isEnumItem(y)?(this.value&y.value)!==0:Object(a.isString)(y)?this._options.ignoreCase?this.key.toLowerCase().indexOf(y.toLowerCase())>=0:this.key.indexOf(y)>=0:(this.value&y)!==0}is(y){return p.isEnumItem(y)?this.key===y.key:Object(a.isString)(y)?this._options.ignoreCase?this.key.toLowerCase()===y.toLowerCase():this.key===y:this.value===y}toString(){return this.key}toJSON(){return this.key}valueOf(){return this.value}static isEnumItem(y){return y instanceof p||Object(a.isObject)(y)&&y.key!==void 0&&y.value!==void 0}}},"./node_modules/enum/lib/indexOf.js":function(I,v,l){l.r(v),l.d(v,"indexOf",function(){return a});const a=Array.prototype.indexOf||function(p,h){h===void 0&&(h=0),h<0&&(h+=this.length),h<0&&(h=0);for(var y=this.length;h<y;h++)if(h in this&&this[h]===p)return h;return-1}},"./node_modules/enum/lib/isType.js":function(I,v,l){l.r(v),l.d(v,"isType",function(){return a}),l.d(v,"isObject",function(){return p}),l.d(v,"isString",function(){return h}),l.d(v,"isNumber",function(){return y});const a=(x,m)=>typeof m===x,p=x=>a("object",x),h=x=>a("string",x),y=x=>a("number",x)},"./node_modules/events/events.js":function(I,v,l){var a=typeof Reflect=="object"?Reflect:null,p=a&&typeof a.apply=="function"?a.apply:function(T,N,O){return Function.prototype.apply.call(T,N,O)},h;a&&typeof a.ownKeys=="function"?h=a.ownKeys:Object.getOwnPropertySymbols?h=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:h=function(T){return Object.getOwnPropertyNames(T)};function y(b){console&&console.warn&&console.warn(b)}var x=Number.isNaN||function(T){return T!==T};function m(){m.init.call(this)}I.exports=m,I.exports.once=C,m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var f=10;function e(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(b){if(typeof b!="number"||b<0||x(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");f=b}}),m.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||x(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function o(b){return b._maxListeners===void 0?m.defaultMaxListeners:b._maxListeners}m.prototype.getMaxListeners=function(){return o(this)},m.prototype.emit=function(T){for(var N=[],O=1;O<arguments.length;O++)N.push(arguments[O]);var U=T==="error",V=this._events;if(V!==void 0)U=U&&V.error===void 0;else if(!U)return!1;if(U){var L;if(N.length>0&&(L=N[0]),L instanceof Error)throw L;var P=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw P.context=L,P}var W=V[T];if(W===void 0)return!1;if(typeof W=="function")p(W,this,N);else for(var G=W.length,Y=B(W,G),O=0;O<G;++O)p(Y[O],this,N);return!0};function c(b,T,N,O){var U,V,L;if(e(N),V=b._events,V===void 0?(V=b._events=Object.create(null),b._eventsCount=0):(V.newListener!==void 0&&(b.emit("newListener",T,N.listener?N.listener:N),V=b._events),L=V[T]),L===void 0)L=V[T]=N,++b._eventsCount;else if(typeof L=="function"?L=V[T]=O?[N,L]:[L,N]:O?L.unshift(N):L.push(N),U=o(b),U>0&&L.length>U&&!L.warned){L.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=b,P.type=T,P.count=L.length,y(P)}return b}m.prototype.addListener=function(T,N){return c(this,T,N,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(T,N){return c(this,T,N,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t(b,T,N){var O={fired:!1,wrapFn:void 0,target:b,type:T,listener:N},U=i.bind(O);return U.listener=N,O.wrapFn=U,U}m.prototype.once=function(T,N){return e(N),this.on(T,t(this,T,N)),this},m.prototype.prependOnceListener=function(T,N){return e(N),this.prependListener(T,t(this,T,N)),this},m.prototype.removeListener=function(T,N){var O,U,V,L,P;if(e(N),U=this._events,U===void 0)return this;if(O=U[T],O===void 0)return this;if(O===N||O.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete U[T],U.removeListener&&this.emit("removeListener",T,O.listener||N));else if(typeof O!="function"){for(V=-1,L=O.length-1;L>=0;L--)if(O[L]===N||O[L].listener===N){P=O[L].listener,V=L;break}if(V<0)return this;V===0?O.shift():k(O,V),O.length===1&&(U[T]=O[0]),U.removeListener!==void 0&&this.emit("removeListener",T,P||N)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(T){var N,O,U;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[T]),this;if(arguments.length===0){var V=Object.keys(O),L;for(U=0;U<V.length;++U)L=V[U],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=O[T],typeof N=="function")this.removeListener(T,N);else if(N!==void 0)for(U=N.length-1;U>=0;U--)this.removeListener(T,N[U]);return this};function d(b,T,N){var O=b._events;if(O===void 0)return[];var U=O[T];return U===void 0?[]:typeof U=="function"?N?[U.listener||U]:[U]:N?E(U):B(U,U.length)}m.prototype.listeners=function(T){return d(this,T,!0)},m.prototype.rawListeners=function(T){return d(this,T,!1)},m.listenerCount=function(b,T){return typeof b.listenerCount=="function"?b.listenerCount(T):S.call(b,T)},m.prototype.listenerCount=S;function S(b){var T=this._events;if(T!==void 0){var N=T[b];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}m.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function B(b,T){for(var N=new Array(T),O=0;O<T;++O)N[O]=b[O];return N}function k(b,T){for(;T+1<b.length;T++)b[T]=b[T+1];b.pop()}function E(b){for(var T=new Array(b.length),N=0;N<T.length;++N)T[N]=b[N].listener||b[N];return T}function C(b,T){return new Promise(function(N,O){function U(L){b.removeListener(T,V),O(L)}function V(){typeof b.removeListener=="function"&&b.removeListener("error",U),N([].slice.call(arguments))}A(b,T,V,{once:!0}),T!=="error"&&_(b,U,{once:!0})})}function _(b,T,N){typeof b.on=="function"&&A(b,"error",T,N)}function A(b,T,N,O){if(typeof b.on=="function")O.once?b.once(T,N):b.on(T,N);else if(typeof b.addEventListener=="function")b.addEventListener(T,function U(V){O.once&&b.removeEventListener(T,U),N(V)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}},"./node_modules/filter-obj/index.js":function(I,v,l){I.exports=function(a,p){for(var h={},y=Object.keys(a),x=Array.isArray(p),m=0;m<y.length;m++){var f=y[m],e=a[f];(x?p.indexOf(f)!==-1:p(f,e,a))&&(h[f]=e)}return h}},"./node_modules/has-binary2/index.js":function(I,v,l){(function(a){var p=l("./node_modules/isarray/index.js"),h=Object.prototype.toString,y=typeof Blob=="function"||typeof Blob<"u"&&h.call(Blob)==="[object BlobConstructor]",x=typeof File=="function"||typeof File<"u"&&h.call(File)==="[object FileConstructor]";I.exports=m;function m(f){if(!f||typeof f!="object")return!1;if(p(f)){for(var e=0,o=f.length;e<o;e++)if(m(f[e]))return!0;return!1}if(typeof a=="function"&&a.isBuffer&&a.isBuffer(f)||typeof ArrayBuffer=="function"&&f instanceof ArrayBuffer||y&&f instanceof Blob||x&&f instanceof File)return!0;if(f.toJSON&&typeof f.toJSON=="function"&&arguments.length===1)return m(f.toJSON(),!0);for(var c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&m(f[c]))return!0;return!1}}).call(this,l("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/has-cors/index.js":function(I,v){try{I.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{I.exports=!1}},"./node_modules/ieee754/index.js":function(I,v){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */v.read=function(l,a,p,h,y){var x,m,f=y*8-h-1,e=(1<<f)-1,o=e>>1,c=-7,i=p?y-1:0,t=p?-1:1,d=l[a+i];for(i+=t,x=d&(1<<-c)-1,d>>=-c,c+=f;c>0;x=x*256+l[a+i],i+=t,c-=8);for(m=x&(1<<-c)-1,x>>=-c,c+=h;c>0;m=m*256+l[a+i],i+=t,c-=8);if(x===0)x=1-o;else{if(x===e)return m?NaN:(d?-1:1)*(1/0);m=m+Math.pow(2,h),x=x-o}return(d?-1:1)*m*Math.pow(2,x-h)},v.write=function(l,a,p,h,y,x){var m,f,e,o=x*8-y-1,c=(1<<o)-1,i=c>>1,t=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=h?0:x-1,S=h?1:-1,B=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(f=isNaN(a)?1:0,m=c):(m=Math.floor(Math.log(a)/Math.LN2),a*(e=Math.pow(2,-m))<1&&(m--,e*=2),m+i>=1?a+=t/e:a+=t*Math.pow(2,1-i),a*e>=2&&(m++,e/=2),m+i>=c?(f=0,m=c):m+i>=1?(f=(a*e-1)*Math.pow(2,y),m=m+i):(f=a*Math.pow(2,i-1)*Math.pow(2,y),m=0));y>=8;l[p+d]=f&255,d+=S,f/=256,y-=8);for(m=m<<y|f,o+=y;o>0;l[p+d]=m&255,d+=S,m/=256,o-=8);l[p+d-S]|=B*128}},"./node_modules/indexof/index.js":function(I,v){var l=[].indexOf;I.exports=function(a,p){if(l)return a.indexOf(p);for(var h=0;h<a.length;++h)if(a[h]===p)return h;return-1}},"./node_modules/isarray/index.js":function(I,v){var l={}.toString;I.exports=Array.isArray||function(a){return l.call(a)=="[object Array]"}},"./node_modules/js-binarypack/lib/binarypack.js":function(I,v,l){var a=l("./node_modules/js-binarypack/lib/bufferbuilder.js").BufferBuilder,p=l("./node_modules/js-binarypack/lib/bufferbuilder.js").binaryFeatures,h={unpack:function(e){var o=new y(e);return o.unpack()},pack:function(e){var o=new x;o.pack(e);var c=o.getBuffer();return c}};I.exports=h;function y(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}y.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128){var o=e;return o}else if((e^224)<32){var c=(e^224)-32;return c}var i;if((i=e^160)<=15)return this.unpack_raw(i);if((i=e^176)<=15)return this.unpack_string(i);if((i=e^144)<=15)return this.unpack_array(i);if((i=e^128)<=15)return this.unpack_map(i);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return i=this.unpack_uint16(),this.unpack_string(i);case 217:return i=this.unpack_uint32(),this.unpack_string(i);case 218:return i=this.unpack_uint16(),this.unpack_raw(i);case 219:return i=this.unpack_uint32(),this.unpack_raw(i);case 220:return i=this.unpack_uint16(),this.unpack_array(i);case 221:return i=this.unpack_uint32(),this.unpack_array(i);case 222:return i=this.unpack_uint16(),this.unpack_map(i);case 223:return i=this.unpack_uint32(),this.unpack_map(i)}},y.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e},y.prototype.unpack_uint16=function(){var e=this.read(2),o=(e[0]&255)*256+(e[1]&255);return this.index+=2,o},y.prototype.unpack_uint32=function(){var e=this.read(4),o=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,o},y.prototype.unpack_uint64=function(){var e=this.read(8),o=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,o},y.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},y.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},y.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},y.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},y.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var o=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,o},y.prototype.unpack_string=function(e){for(var o=this.read(e),c=0,i="",t,d;c<e;)t=o[c],t<128?(i+=String.fromCharCode(t),c++):(t^192)<32?(d=(t^192)<<6|o[c+1]&63,i+=String.fromCharCode(d),c+=2):(d=(t&15)<<12|(o[c+1]&63)<<6|o[c+2]&63,i+=String.fromCharCode(d),c+=3);return this.index+=e,i},y.prototype.unpack_array=function(e){for(var o=new Array(e),c=0;c<e;c++)o[c]=this.unpack();return o},y.prototype.unpack_map=function(e){for(var o={},c=0;c<e;c++){var i=this.unpack(),t=this.unpack();o[i]=t}return o},y.prototype.unpack_float=function(){var e=this.unpack_uint32(),o=e>>31,c=(e>>23&255)-127,i=e&8388607|8388608;return(o==0?1:-1)*i*Math.pow(2,c-23)},y.prototype.unpack_double=function(){var e=this.unpack_uint32(),o=this.unpack_uint32(),c=e>>31,i=(e>>20&2047)-1023,t=e&1048575|1048576,d=t*Math.pow(2,i-20)+o*Math.pow(2,i-52);return(c==0?1:-1)*d},y.prototype.read=function(e){var o=this.index;if(o+e<=this.length)return this.dataView.subarray(o,o+e);throw new Error("BinaryPackFailure: read index out of range")};function x(){this.bufferBuilder=new a}x.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},x.prototype.pack=function(e){var o=typeof e;if(o=="string")this.pack_string(e);else if(o=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(o=="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(o=="undefined")this.bufferBuilder.append(192);else if(o=="object")if(e===null)this.bufferBuilder.append(192);else{var c=e.constructor;if(c==Array)this.pack_array(e);else if(c==Blob||c==File)this.pack_bin(e);else if(c==ArrayBuffer)p.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)p.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(c==Object)this.pack_object(e);else if(c==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+c.toString()+'" not yet supported')}else throw new Error('Type "'+o+'" not yet supported');this.bufferBuilder.flush()},x.prototype.pack_bin=function(e){var o=e.length||e.byteLength||e.size;if(o<=15)this.pack_uint8(160+o);else if(o<=65535)this.bufferBuilder.append(218),this.pack_uint16(o);else if(o<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(o);else throw new Error("Invalid length");this.bufferBuilder.append(e)},x.prototype.pack_string=function(e){var o=f(e);if(o<=15)this.pack_uint8(176+o);else if(o<=65535)this.bufferBuilder.append(216),this.pack_uint16(o);else if(o<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(o);else throw new Error("Invalid length");this.bufferBuilder.append(e)},x.prototype.pack_array=function(e){var o=e.length;if(o<=15)this.pack_uint8(144+o);else if(o<=65535)this.bufferBuilder.append(220),this.pack_uint16(o);else if(o<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(o);else throw new Error("Invalid length");for(var c=0;c<o;c++)this.pack(e[c])},x.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(e&255);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-9223372036854776e3<=e&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(0<=e&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")},x.prototype.pack_double=function(e){var o=0;e<0&&(o=1,e=-e);var c=Math.floor(Math.log(e)/Math.LN2),i=e/Math.pow(2,c)-1,t=Math.floor(i*Math.pow(2,52)),d=Math.pow(2,32),S=o<<31|c+1023<<20|t/d&1048575,B=t%d;this.bufferBuilder.append(203),this.pack_int32(S),this.pack_int32(B)},x.prototype.pack_object=function(e){var o=Object.keys(e),c=o.length;if(c<=15)this.pack_uint8(128+c);else if(c<=65535)this.bufferBuilder.append(222),this.pack_uint16(c);else if(c<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(c);else throw new Error("Invalid length");for(var i in e)e.hasOwnProperty(i)&&(this.pack(i),this.pack(e[i]))},x.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},x.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)},x.prototype.pack_uint32=function(e){var o=e&4294967295;this.bufferBuilder.append((o&4278190080)>>>24),this.bufferBuilder.append((o&16711680)>>>16),this.bufferBuilder.append((o&65280)>>>8),this.bufferBuilder.append(o&255)},x.prototype.pack_uint64=function(e){var o=e/Math.pow(2,32),c=e%Math.pow(2,32);this.bufferBuilder.append((o&4278190080)>>>24),this.bufferBuilder.append((o&16711680)>>>16),this.bufferBuilder.append((o&65280)>>>8),this.bufferBuilder.append(o&255),this.bufferBuilder.append((c&4278190080)>>>24),this.bufferBuilder.append((c&16711680)>>>16),this.bufferBuilder.append((c&65280)>>>8),this.bufferBuilder.append(c&255)},x.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)},x.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)},x.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)},x.prototype.pack_int64=function(e){var o=Math.floor(e/Math.pow(2,32)),c=e%Math.pow(2,32);this.bufferBuilder.append((o&4278190080)>>>24),this.bufferBuilder.append((o&16711680)>>>16),this.bufferBuilder.append((o&65280)>>>8),this.bufferBuilder.append(o&255),this.bufferBuilder.append((c&4278190080)>>>24),this.bufferBuilder.append((c&16711680)>>>16),this.bufferBuilder.append((c&65280)>>>8),this.bufferBuilder.append(c&255)};function m(e){var o=e.charCodeAt(0);return o<=2047?"00":o<=65535?"000":o<=2097151?"0000":o<=67108863?"00000":"000000"}function f(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,m).length}},"./node_modules/js-binarypack/lib/bufferbuilder.js":function(I,v){var l={};l.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),l.useArrayBufferView=!l.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),I.exports.binaryFeatures=l;var a=I.exports.BlobBuilder;typeof window<"u"&&(a=I.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function p(){this._pieces=[],this._parts=[]}p.prototype.append=function(h){typeof h=="number"?this._pieces.push(h):(this.flush(),this._parts.push(h))},p.prototype.flush=function(){if(this._pieces.length>0){var h=new Uint8Array(this._pieces);l.useArrayBufferView||(h=h.buffer),this._parts.push(h),this._pieces=[]}},p.prototype.getBuffer=function(){if(this.flush(),l.useBlobBuilder){for(var h=new a,y=0,x=this._parts.length;y<x;y++)h.append(this._parts[y]);return h.getBlob()}else return new Blob(this._parts)},I.exports.BufferBuilder=p},"./node_modules/ms/index.js":function(I,v){var l=1e3,a=l*60,p=a*60,h=p*24,y=h*365.25;I.exports=function(o,c){c=c||{};var i=typeof o;if(i==="string"&&o.length>0)return x(o);if(i==="number"&&isNaN(o)===!1)return c.long?f(o):m(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function x(o){if(o=String(o),!(o.length>100)){var c=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(o);if(c){var i=parseFloat(c[1]),t=(c[2]||"ms").toLowerCase();switch(t){case"years":case"year":case"yrs":case"yr":case"y":return i*y;case"days":case"day":case"d":return i*h;case"hours":case"hour":case"hrs":case"hr":case"h":return i*p;case"minutes":case"minute":case"mins":case"min":case"m":return i*a;case"seconds":case"second":case"secs":case"sec":case"s":return i*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function m(o){return o>=h?Math.round(o/h)+"d":o>=p?Math.round(o/p)+"h":o>=a?Math.round(o/a)+"m":o>=l?Math.round(o/l)+"s":o+"ms"}function f(o){return e(o,h,"day")||e(o,p,"hour")||e(o,a,"minute")||e(o,l,"second")||o+" ms"}function e(o,c,i){if(!(o<c))return o<c*1.5?Math.floor(o/c)+" "+i:Math.ceil(o/c)+" "+i+"s"}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(I,v,l){(function(a){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <http://feross.org>
* @license  MIT
*/var p=l("./node_modules/base64-js/index.js"),h=l("./node_modules/ieee754/index.js"),y=l("./node_modules/node-libs-browser/node_modules/isarray/index.js");v.Buffer=e,v.SlowBuffer=C,v.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=a.TYPED_ARRAY_SUPPORT!==void 0?a.TYPED_ARRAY_SUPPORT:x(),v.kMaxLength=m();function x(){try{var g=new Uint8Array(1);return g.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},g.foo()===42&&typeof g.subarray=="function"&&g.subarray(1,1).byteLength===0}catch{return!1}}function m(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(g,n){if(m()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(g=new Uint8Array(n),g.__proto__=e.prototype):(g===null&&(g=new e(n)),g.length=n),g}function e(g,n,s){if(!e.TYPED_ARRAY_SUPPORT&&!(this instanceof e))return new e(g,n,s);if(typeof g=="number"){if(typeof n=="string")throw new Error("If encoding is specified then the first argument must be a string");return t(this,g)}return o(this,g,n,s)}e.poolSize=8192,e._augment=function(g){return g.__proto__=e.prototype,g};function o(g,n,s,w){if(typeof n=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer?B(g,n,s,w):typeof n=="string"?d(g,n,s):k(g,n)}e.from=function(g,n,s){return o(null,g,n,s)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0}));function c(g){if(typeof g!="number")throw new TypeError('"size" argument must be a number');if(g<0)throw new RangeError('"size" argument must not be negative')}function i(g,n,s,w){return c(n),n<=0?f(g,n):s!==void 0?typeof w=="string"?f(g,n).fill(s,w):f(g,n).fill(s):f(g,n)}e.alloc=function(g,n,s){return i(null,g,n,s)};function t(g,n){if(c(n),g=f(g,n<0?0:E(n)|0),!e.TYPED_ARRAY_SUPPORT)for(var s=0;s<n;++s)g[s]=0;return g}e.allocUnsafe=function(g){return t(null,g)},e.allocUnsafeSlow=function(g){return t(null,g)};function d(g,n,s){if((typeof s!="string"||s==="")&&(s="utf8"),!e.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var w=_(n,s)|0;g=f(g,w);var F=g.write(n,s);return F!==w&&(g=g.slice(0,F)),g}function S(g,n){var s=n.length<0?0:E(n.length)|0;g=f(g,s);for(var w=0;w<s;w+=1)g[w]=n[w]&255;return g}function B(g,n,s,w){if(n.byteLength,s<0||n.byteLength<s)throw new RangeError("'offset' is out of bounds");if(n.byteLength<s+(w||0))throw new RangeError("'length' is out of bounds");return s===void 0&&w===void 0?n=new Uint8Array(n):w===void 0?n=new Uint8Array(n,s):n=new Uint8Array(n,s,w),e.TYPED_ARRAY_SUPPORT?(g=n,g.__proto__=e.prototype):g=S(g,n),g}function k(g,n){if(e.isBuffer(n)){var s=E(n.length)|0;return g=f(g,s),g.length===0||n.copy(g,0,0,s),g}if(n){if(typeof ArrayBuffer<"u"&&n.buffer instanceof ArrayBuffer||"length"in n)return typeof n.length!="number"||je(n.length)?f(g,0):S(g,n);if(n.type==="Buffer"&&y(n.data))return S(g,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function E(g){if(g>=m())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m().toString(16)+" bytes");return g|0}function C(g){return+g!=g&&(g=0),e.alloc(+g)}e.isBuffer=function(n){return!!(n!=null&&n._isBuffer)},e.compare=function(n,s){if(!e.isBuffer(n)||!e.isBuffer(s))throw new TypeError("Arguments must be Buffers");if(n===s)return 0;for(var w=n.length,F=s.length,M=0,D=Math.min(w,F);M<D;++M)if(n[M]!==s[M]){w=n[M],F=s[M];break}return w<F?-1:F<w?1:0},e.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(n,s){if(!y(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return e.alloc(0);var w;if(s===void 0)for(s=0,w=0;w<n.length;++w)s+=n[w].length;var F=e.allocUnsafe(s),M=0;for(w=0;w<n.length;++w){var D=n[w];if(!e.isBuffer(D))throw new TypeError('"list" argument must be an Array of Buffers');D.copy(F,M),M+=D.length}return F};function _(g,n){if(e.isBuffer(g))return g.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(g)||g instanceof ArrayBuffer))return g.byteLength;typeof g!="string"&&(g=""+g);var s=g.length;if(s===0)return 0;for(var w=!1;;)switch(n){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":case void 0:return Q(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return he(g).length;default:if(w)return Q(g).length;n=(""+n).toLowerCase(),w=!0}}e.byteLength=_;function A(g,n,s){var w=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,n>>>=0,s<=n))return"";for(g||(g="utf8");;)switch(g){case"hex":return Oe(this,n,s);case"utf8":case"utf-8":return Y(this,n,s);case"ascii":return Be(this,n,s);case"latin1":case"binary":return Re(this,n,s);case"base64":return G(this,n,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,n,s);default:if(w)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),w=!0}}e.prototype._isBuffer=!0;function b(g,n,s){var w=g[n];g[n]=g[s],g[s]=w}e.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<n;s+=2)b(this,s,s+1);return this},e.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<n;s+=4)b(this,s,s+3),b(this,s+1,s+2);return this},e.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<n;s+=8)b(this,s,s+7),b(this,s+1,s+6),b(this,s+2,s+5),b(this,s+3,s+4);return this},e.prototype.toString=function(){var n=this.length|0;return n===0?"":arguments.length===0?Y(this,0,n):A.apply(this,arguments)},e.prototype.equals=function(n){if(!e.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:e.compare(this,n)===0},e.prototype.inspect=function(){var n="",s=v.INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,s).match(/.{2}/g).join(" "),this.length>s&&(n+=" ... ")),"<Buffer "+n+">"},e.prototype.compare=function(n,s,w,F,M){if(!e.isBuffer(n))throw new TypeError("Argument must be a Buffer");if(s===void 0&&(s=0),w===void 0&&(w=n?n.length:0),F===void 0&&(F=0),M===void 0&&(M=this.length),s<0||w>n.length||F<0||M>this.length)throw new RangeError("out of range index");if(F>=M&&s>=w)return 0;if(F>=M)return-1;if(s>=w)return 1;if(s>>>=0,w>>>=0,F>>>=0,M>>>=0,this===n)return 0;for(var D=M-F,H=w-s,$=Math.min(D,H),q=this.slice(F,M),ie=n.slice(s,w),K=0;K<$;++K)if(q[K]!==ie[K]){D=q[K],H=ie[K];break}return D<H?-1:H<D?1:0};function T(g,n,s,w,F){if(g.length===0)return-1;if(typeof s=="string"?(w=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,isNaN(s)&&(s=F?0:g.length-1),s<0&&(s=g.length+s),s>=g.length){if(F)return-1;s=g.length-1}else if(s<0)if(F)s=0;else return-1;if(typeof n=="string"&&(n=e.from(n,w)),e.isBuffer(n))return n.length===0?-1:N(g,n,s,w,F);if(typeof n=="number")return n=n&255,e.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(g,n,s):Uint8Array.prototype.lastIndexOf.call(g,n,s):N(g,[n],s,w,F);throw new TypeError("val must be string, number or Buffer")}function N(g,n,s,w,F){var M=1,D=g.length,H=n.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(g.length<2||n.length<2)return-1;M=2,D/=2,H/=2,s/=2}function $(_e,ke){return M===1?_e[ke]:_e.readUInt16BE(ke*M)}var q;if(F){var ie=-1;for(q=s;q<D;q++)if($(g,q)===$(n,ie===-1?0:q-ie)){if(ie===-1&&(ie=q),q-ie+1===H)return ie*M}else ie!==-1&&(q-=q-ie),ie=-1}else for(s+H>D&&(s=D-H),q=s;q>=0;q--){for(var K=!0,Se=0;Se<H;Se++)if($(g,q+Se)!==$(n,Se)){K=!1;break}if(K)return q}return-1}e.prototype.includes=function(n,s,w){return this.indexOf(n,s,w)!==-1},e.prototype.indexOf=function(n,s,w){return T(this,n,s,w,!0)},e.prototype.lastIndexOf=function(n,s,w){return T(this,n,s,w,!1)};function O(g,n,s,w){s=Number(s)||0;var F=g.length-s;w?(w=Number(w),w>F&&(w=F)):w=F;var M=n.length;if(M%2!==0)throw new TypeError("Invalid hex string");w>M/2&&(w=M/2);for(var D=0;D<w;++D){var H=parseInt(n.substr(D*2,2),16);if(isNaN(H))return D;g[s+D]=H}return D}function U(g,n,s,w){return oe(Q(n,g.length-s),g,s,w)}function V(g,n,s,w){return oe(ce(n),g,s,w)}function L(g,n,s,w){return V(g,n,s,w)}function P(g,n,s,w){return oe(he(n),g,s,w)}function W(g,n,s,w){return oe(Me(n,g.length-s),g,s,w)}e.prototype.write=function(n,s,w,F){if(s===void 0)F="utf8",w=this.length,s=0;else if(w===void 0&&typeof s=="string")F=s,w=this.length,s=0;else if(isFinite(s))s=s|0,isFinite(w)?(w=w|0,F===void 0&&(F="utf8")):(F=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var M=this.length-s;if((w===void 0||w>M)&&(w=M),n.length>0&&(w<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");for(var D=!1;;)switch(F){case"hex":return O(this,n,s,w);case"utf8":case"utf-8":return U(this,n,s,w);case"ascii":return V(this,n,s,w);case"latin1":case"binary":return L(this,n,s,w);case"base64":return P(this,n,s,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,n,s,w);default:if(D)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),D=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(g,n,s){return n===0&&s===g.length?p.fromByteArray(g):p.fromByteArray(g.slice(n,s))}function Y(g,n,s){s=Math.min(g.length,s);for(var w=[],F=n;F<s;){var M=g[F],D=null,H=M>239?4:M>223?3:M>191?2:1;if(F+H<=s){var $,q,ie,K;switch(H){case 1:M<128&&(D=M);break;case 2:$=g[F+1],($&192)===128&&(K=(M&31)<<6|$&63,K>127&&(D=K));break;case 3:$=g[F+1],q=g[F+2],($&192)===128&&(q&192)===128&&(K=(M&15)<<12|($&63)<<6|q&63,K>2047&&(K<55296||K>57343)&&(D=K));break;case 4:$=g[F+1],q=g[F+2],ie=g[F+3],($&192)===128&&(q&192)===128&&(ie&192)===128&&(K=(M&15)<<18|($&63)<<12|(q&63)<<6|ie&63,K>65535&&K<1114112&&(D=K))}}D===null?(D=65533,H=1):D>65535&&(D-=65536,w.push(D>>>10&1023|55296),D=56320|D&1023),w.push(D),F+=H}return se(w)}var ne=4096;function se(g){var n=g.length;if(n<=ne)return String.fromCharCode.apply(String,g);for(var s="",w=0;w<n;)s+=String.fromCharCode.apply(String,g.slice(w,w+=ne));return s}function Be(g,n,s){var w="";s=Math.min(g.length,s);for(var F=n;F<s;++F)w+=String.fromCharCode(g[F]&127);return w}function Re(g,n,s){var w="";s=Math.min(g.length,s);for(var F=n;F<s;++F)w+=String.fromCharCode(g[F]);return w}function Oe(g,n,s){var w=g.length;(!n||n<0)&&(n=0),(!s||s<0||s>w)&&(s=w);for(var F="",M=n;M<s;++M)F+=Pe(g[M]);return F}function Ne(g,n,s){for(var w=g.slice(n,s),F="",M=0;M<w.length;M+=2)F+=String.fromCharCode(w[M]+w[M+1]*256);return F}e.prototype.slice=function(n,s){var w=this.length;n=~~n,s=s===void 0?w:~~s,n<0?(n+=w,n<0&&(n=0)):n>w&&(n=w),s<0?(s+=w,s<0&&(s=0)):s>w&&(s=w),s<n&&(s=n);var F;if(e.TYPED_ARRAY_SUPPORT)F=this.subarray(n,s),F.__proto__=e.prototype;else{var M=s-n;F=new e(M,void 0);for(var D=0;D<M;++D)F[D]=this[D+n]}return F};function Z(g,n,s){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+n>s)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUIntLE=function(n,s,w){n=n|0,s=s|0,w||Z(n,s,this.length);for(var F=this[n],M=1,D=0;++D<s&&(M*=256);)F+=this[n+D]*M;return F},e.prototype.readUIntBE=function(n,s,w){n=n|0,s=s|0,w||Z(n,s,this.length);for(var F=this[n+--s],M=1;s>0&&(M*=256);)F+=this[n+--s]*M;return F},e.prototype.readUInt8=function(n,s){return s||Z(n,1,this.length),this[n]},e.prototype.readUInt16LE=function(n,s){return s||Z(n,2,this.length),this[n]|this[n+1]<<8},e.prototype.readUInt16BE=function(n,s){return s||Z(n,2,this.length),this[n]<<8|this[n+1]},e.prototype.readUInt32LE=function(n,s){return s||Z(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},e.prototype.readUInt32BE=function(n,s){return s||Z(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},e.prototype.readIntLE=function(n,s,w){n=n|0,s=s|0,w||Z(n,s,this.length);for(var F=this[n],M=1,D=0;++D<s&&(M*=256);)F+=this[n+D]*M;return M*=128,F>=M&&(F-=Math.pow(2,8*s)),F},e.prototype.readIntBE=function(n,s,w){n=n|0,s=s|0,w||Z(n,s,this.length);for(var F=s,M=1,D=this[n+--F];F>0&&(M*=256);)D+=this[n+--F]*M;return M*=128,D>=M&&(D-=Math.pow(2,8*s)),D},e.prototype.readInt8=function(n,s){return s||Z(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},e.prototype.readInt16LE=function(n,s){s||Z(n,2,this.length);var w=this[n]|this[n+1]<<8;return w&32768?w|4294901760:w},e.prototype.readInt16BE=function(n,s){s||Z(n,2,this.length);var w=this[n+1]|this[n]<<8;return w&32768?w|4294901760:w},e.prototype.readInt32LE=function(n,s){return s||Z(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},e.prototype.readInt32BE=function(n,s){return s||Z(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},e.prototype.readFloatLE=function(n,s){return s||Z(n,4,this.length),h.read(this,n,!0,23,4)},e.prototype.readFloatBE=function(n,s){return s||Z(n,4,this.length),h.read(this,n,!1,23,4)},e.prototype.readDoubleLE=function(n,s){return s||Z(n,8,this.length),h.read(this,n,!0,52,8)},e.prototype.readDoubleBE=function(n,s){return s||Z(n,8,this.length),h.read(this,n,!1,52,8)};function X(g,n,s,w,F,M){if(!e.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>F||n<M)throw new RangeError('"value" argument is out of bounds');if(s+w>g.length)throw new RangeError("Index out of range")}e.prototype.writeUIntLE=function(n,s,w,F){if(n=+n,s=s|0,w=w|0,!F){var M=Math.pow(2,8*w)-1;X(this,n,s,w,M,0)}var D=1,H=0;for(this[s]=n&255;++H<w&&(D*=256);)this[s+H]=n/D&255;return s+w},e.prototype.writeUIntBE=function(n,s,w,F){if(n=+n,s=s|0,w=w|0,!F){var M=Math.pow(2,8*w)-1;X(this,n,s,w,M,0)}var D=w-1,H=1;for(this[s+D]=n&255;--D>=0&&(H*=256);)this[s+D]=n/H&255;return s+w},e.prototype.writeUInt8=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,1,255,0),e.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),this[s]=n&255,s+1};function ve(g,n,s,w){n<0&&(n=65535+n+1);for(var F=0,M=Math.min(g.length-s,2);F<M;++F)g[s+F]=(n&255<<8*(w?F:1-F))>>>(w?F:1-F)*8}e.prototype.writeUInt16LE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[s]=n&255,this[s+1]=n>>>8):ve(this,n,s,!0),s+2},e.prototype.writeUInt16BE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[s]=n>>>8,this[s+1]=n&255):ve(this,n,s,!1),s+2};function Ee(g,n,s,w){n<0&&(n=4294967295+n+1);for(var F=0,M=Math.min(g.length-s,4);F<M;++F)g[s+F]=n>>>(w?F:3-F)*8&255}e.prototype.writeUInt32LE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[s+3]=n>>>24,this[s+2]=n>>>16,this[s+1]=n>>>8,this[s]=n&255):Ee(this,n,s,!0),s+4},e.prototype.writeUInt32BE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255):Ee(this,n,s,!1),s+4},e.prototype.writeIntLE=function(n,s,w,F){if(n=+n,s=s|0,!F){var M=Math.pow(2,8*w-1);X(this,n,s,w,M-1,-M)}var D=0,H=1,$=0;for(this[s]=n&255;++D<w&&(H*=256);)n<0&&$===0&&this[s+D-1]!==0&&($=1),this[s+D]=(n/H>>0)-$&255;return s+w},e.prototype.writeIntBE=function(n,s,w,F){if(n=+n,s=s|0,!F){var M=Math.pow(2,8*w-1);X(this,n,s,w,M-1,-M)}var D=w-1,H=1,$=0;for(this[s+D]=n&255;--D>=0&&(H*=256);)n<0&&$===0&&this[s+D+1]!==0&&($=1),this[s+D]=(n/H>>0)-$&255;return s+w},e.prototype.writeInt8=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,1,127,-128),e.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),n<0&&(n=255+n+1),this[s]=n&255,s+1},e.prototype.writeInt16LE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[s]=n&255,this[s+1]=n>>>8):ve(this,n,s,!0),s+2},e.prototype.writeInt16BE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[s]=n>>>8,this[s+1]=n&255):ve(this,n,s,!1),s+2},e.prototype.writeInt32LE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[s]=n&255,this[s+1]=n>>>8,this[s+2]=n>>>16,this[s+3]=n>>>24):Ee(this,n,s,!0),s+4},e.prototype.writeInt32BE=function(n,s,w){return n=+n,s=s|0,w||X(this,n,s,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),e.TYPED_ARRAY_SUPPORT?(this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255):Ee(this,n,s,!1),s+4};function Ce(g,n,s,w,F,M){if(s+w>g.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function Ae(g,n,s,w,F){return F||Ce(g,n,s,4),h.write(g,n,s,w,23,4),s+4}e.prototype.writeFloatLE=function(n,s,w){return Ae(this,n,s,!0,w)},e.prototype.writeFloatBE=function(n,s,w){return Ae(this,n,s,!1,w)};function ye(g,n,s,w,F){return F||Ce(g,n,s,8),h.write(g,n,s,w,52,8),s+8}e.prototype.writeDoubleLE=function(n,s,w){return ye(this,n,s,!0,w)},e.prototype.writeDoubleBE=function(n,s,w){return ye(this,n,s,!1,w)},e.prototype.copy=function(n,s,w,F){if(w||(w=0),!F&&F!==0&&(F=this.length),s>=n.length&&(s=n.length),s||(s=0),F>0&&F<w&&(F=w),F===w||n.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("sourceStart out of bounds");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),n.length-s<F-w&&(F=n.length-s+w);var M=F-w,D;if(this===n&&w<s&&s<F)for(D=M-1;D>=0;--D)n[D+s]=this[D+w];else if(M<1e3||!e.TYPED_ARRAY_SUPPORT)for(D=0;D<M;++D)n[D+s]=this[D+w];else Uint8Array.prototype.set.call(n,this.subarray(w,w+M),s);return M},e.prototype.fill=function(n,s,w,F){if(typeof n=="string"){if(typeof s=="string"?(F=s,s=0,w=this.length):typeof w=="string"&&(F=w,w=this.length),n.length===1){var M=n.charCodeAt(0);M<256&&(n=M)}if(F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!e.isEncoding(F))throw new TypeError("Unknown encoding: "+F)}else typeof n=="number"&&(n=n&255);if(s<0||this.length<s||this.length<w)throw new RangeError("Out of range index");if(w<=s)return this;s=s>>>0,w=w===void 0?this.length:w>>>0,n||(n=0);var D;if(typeof n=="number")for(D=s;D<w;++D)this[D]=n;else{var H=e.isBuffer(n)?n:Q(new e(n,F).toString()),$=H.length;for(D=0;D<w-s;++D)this[D+s]=H[D%$]}return this};var Fe=/[^+\/0-9A-Za-z-_]/g;function Ie(g){if(g=le(g).replace(Fe,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function le(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function Pe(g){return g<16?"0"+g.toString(16):g.toString(16)}function Q(g,n){n=n||1/0;for(var s,w=g.length,F=null,M=[],D=0;D<w;++D){if(s=g.charCodeAt(D),s>55295&&s<57344){if(!F){if(s>56319){(n-=3)>-1&&M.push(239,191,189);continue}else if(D+1===w){(n-=3)>-1&&M.push(239,191,189);continue}F=s;continue}if(s<56320){(n-=3)>-1&&M.push(239,191,189),F=s;continue}s=(F-55296<<10|s-56320)+65536}else F&&(n-=3)>-1&&M.push(239,191,189);if(F=null,s<128){if((n-=1)<0)break;M.push(s)}else if(s<2048){if((n-=2)<0)break;M.push(s>>6|192,s&63|128)}else if(s<65536){if((n-=3)<0)break;M.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((n-=4)<0)break;M.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return M}function ce(g){for(var n=[],s=0;s<g.length;++s)n.push(g.charCodeAt(s)&255);return n}function Me(g,n){for(var s,w,F,M=[],D=0;D<g.length&&!((n-=2)<0);++D)s=g.charCodeAt(D),w=s>>8,F=s%256,M.push(F),M.push(w);return M}function he(g){return p.toByteArray(Ie(g))}function oe(g,n,s,w){for(var F=0;F<w&&!(F+s>=n.length||F>=g.length);++F)n[F+s]=g[F];return F}function je(g){return g!==g}}).call(this,l("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/isarray/index.js":function(I,v){var l={}.toString;I.exports=Array.isArray||function(a){return l.call(a)=="[object Array]"}},"./node_modules/object-sizeof/byte_size.js":function(I,v){I.exports={STRING:2,BOOLEAN:4,NUMBER:8}},"./node_modules/object-sizeof/index.js":function(I,v,l){var a=l("./node_modules/object-sizeof/byte_size.js"),p=l("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer;function h(f){const e=[];for(var o in f)e.push(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(f);Array.prototype.push.apply(e,c)}return e}function y(f,e){if(e==null)return 0;for(var o=0,c=h(e),i=0;i<c.length;i++){var t=c[i];if(typeof e[t]=="object"&&e[t]!==null){if(f.has(e[t]))continue;f.add(e[t])}o+=x(f)(t);try{o+=x(f)(e[t])}catch(d){d instanceof RangeError&&(o=0)}}return o}function x(f){return function(o){if(p.isBuffer(o))return o.length;var c=typeof o;switch(c){case"string":return o.length*a.STRING;case"boolean":return a.BOOLEAN;case"number":return a.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(o)?Symbol.keyFor(o).length*a.STRING:(o.toString().length-8)*a.STRING;case"object":return Array.isArray(o)?o.map(x(f)).reduce(function(t,d){return t+d},0):y(f,o);default:return 0}}}function m(f){return x(new WeakSet)(f)}I.exports=m},"./node_modules/parseqs/index.js":function(I,v){v.encode=function(l){var a="";for(var p in l)l.hasOwnProperty(p)&&(a.length&&(a+="&"),a+=encodeURIComponent(p)+"="+encodeURIComponent(l[p]));return a},v.decode=function(l){for(var a={},p=l.split("&"),h=0,y=p.length;h<y;h++){var x=p[h].split("=");a[decodeURIComponent(x[0])]=decodeURIComponent(x[1])}return a}},"./node_modules/parseuri/index.js":function(I,v){var l=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];I.exports=function(x){var m=x,f=x.indexOf("["),e=x.indexOf("]");f!=-1&&e!=-1&&(x=x.substring(0,f)+x.substring(f,e).replace(/:/g,";")+x.substring(e,x.length));for(var o=l.exec(x||""),c={},i=14;i--;)c[a[i]]=o[i]||"";return f!=-1&&e!=-1&&(c.source=m,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=p(c,c.path),c.queryKey=h(c,c.query),c};function p(y,x){var m=/\/{2,9}/g,f=x.replace(m,"/").split("/");return(x.substr(0,1)=="/"||x.length===0)&&f.splice(0,1),x.substr(x.length-1,1)=="/"&&f.splice(f.length-1,1),f}function h(y,x){var m={};return x.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,e,o){e&&(m[e]=o)}),m}},"./node_modules/process/browser.js":function(I,v){var l=I.exports={},a,p;function h(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=h}catch{a=h}try{typeof clearTimeout=="function"?p=clearTimeout:p=y}catch{p=y}})();function x(B){if(a===setTimeout)return setTimeout(B,0);if((a===h||!a)&&setTimeout)return a=setTimeout,setTimeout(B,0);try{return a(B,0)}catch{try{return a.call(null,B,0)}catch{return a.call(this,B,0)}}}function m(B){if(p===clearTimeout)return clearTimeout(B);if((p===y||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(B);try{return p(B)}catch{try{return p.call(null,B)}catch{return p.call(this,B)}}}var f=[],e=!1,o,c=-1;function i(){!e||!o||(e=!1,o.length?f=o.concat(f):c=-1,f.length&&t())}function t(){if(!e){var B=x(i);e=!0;for(var k=f.length;k;){for(o=f,f=[];++c<k;)o&&o[c].run();c=-1,k=f.length}o=null,e=!1,m(B)}}l.nextTick=function(B){var k=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)k[E-1]=arguments[E];f.push(new d(B,k)),f.length===1&&!e&&x(t)};function d(B,k){this.fun=B,this.array=k}d.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function S(){}l.on=S,l.addListener=S,l.once=S,l.off=S,l.removeListener=S,l.removeAllListeners=S,l.emit=S,l.prependListener=S,l.prependOnceListener=S,l.listeners=function(B){return[]},l.binding=function(B){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(B){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},"./node_modules/query-string/index.js":function(I,v,l){const a=l("./node_modules/strict-uri-encode/index.js"),p=l("./node_modules/decode-uri-component/index.js"),h=l("./node_modules/split-on-first/index.js"),y=l("./node_modules/filter-obj/index.js"),x=E=>E==null;function m(E){switch(E.arrayFormat){case"index":return C=>(_,A)=>{const b=_.length;return A===void 0||E.skipNull&&A===null||E.skipEmptyString&&A===""?_:A===null?[..._,[o(C,E),"[",b,"]"].join("")]:[..._,[o(C,E),"[",o(b,E),"]=",o(A,E)].join("")]};case"bracket":return C=>(_,A)=>A===void 0||E.skipNull&&A===null||E.skipEmptyString&&A===""?_:A===null?[..._,[o(C,E),"[]"].join("")]:[..._,[o(C,E),"[]=",o(A,E)].join("")];case"comma":case"separator":return C=>(_,A)=>A==null||A.length===0?_:_.length===0?[[o(C,E),"=",o(A,E)].join("")]:[[_,o(A,E)].join(E.arrayFormatSeparator)];default:return C=>(_,A)=>A===void 0||E.skipNull&&A===null||E.skipEmptyString&&A===""?_:A===null?[..._,o(C,E)]:[..._,[o(C,E),"=",o(A,E)].join("")]}}function f(E){let C;switch(E.arrayFormat){case"index":return(_,A,b)=>{if(C=/\[(\d*)\]$/.exec(_),_=_.replace(/\[\d*\]$/,""),!C){b[_]=A;return}b[_]===void 0&&(b[_]={}),b[_][C[1]]=A};case"bracket":return(_,A,b)=>{if(C=/(\[\])$/.exec(_),_=_.replace(/\[\]$/,""),!C){b[_]=A;return}if(b[_]===void 0){b[_]=[A];return}b[_]=[].concat(b[_],A)};case"comma":case"separator":return(_,A,b)=>{const T=typeof A=="string"&&A.includes(E.arrayFormatSeparator),N=typeof A=="string"&&!T&&c(A,E).includes(E.arrayFormatSeparator);A=N?c(A,E):A;const O=T||N?A.split(E.arrayFormatSeparator).map(U=>c(U,E)):A===null?A:c(A,E);b[_]=O};default:return(_,A,b)=>{if(b[_]===void 0){b[_]=A;return}b[_]=[].concat(b[_],A)}}}function e(E){if(typeof E!="string"||E.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function o(E,C){return C.encode?C.strict?a(E):encodeURIComponent(E):E}function c(E,C){return C.decode?p(E):E}function i(E){return Array.isArray(E)?E.sort():typeof E=="object"?i(Object.keys(E)).sort((C,_)=>Number(C)-Number(_)).map(C=>E[C]):E}function t(E){const C=E.indexOf("#");return C!==-1&&(E=E.slice(0,C)),E}function d(E){let C="";const _=E.indexOf("#");return _!==-1&&(C=E.slice(_)),C}function S(E){E=t(E);const C=E.indexOf("?");return C===-1?"":E.slice(C+1)}function B(E,C){return C.parseNumbers&&!Number.isNaN(Number(E))&&typeof E=="string"&&E.trim()!==""?E=Number(E):C.parseBooleans&&E!==null&&(E.toLowerCase()==="true"||E.toLowerCase()==="false")&&(E=E.toLowerCase()==="true"),E}function k(E,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),e(C.arrayFormatSeparator);const _=f(C),A=Object.create(null);if(typeof E!="string"||(E=E.trim().replace(/^[?#&]/,""),!E))return A;for(const b of E.split("&")){if(b==="")continue;let[T,N]=h(C.decode?b.replace(/\+/g," "):b,"=");N=N===void 0?null:["comma","separator"].includes(C.arrayFormat)?N:c(N,C),_(c(T,C),N,A)}for(const b of Object.keys(A)){const T=A[b];if(typeof T=="object"&&T!==null)for(const N of Object.keys(T))T[N]=B(T[N],C);else A[b]=B(T,C)}return C.sort===!1?A:(C.sort===!0?Object.keys(A).sort():Object.keys(A).sort(C.sort)).reduce((b,T)=>{const N=A[T];return N&&typeof N=="object"&&!Array.isArray(N)?b[T]=i(N):b[T]=N,b},Object.create(null))}v.extract=S,v.parse=k,v.stringify=(E,C)=>{if(!E)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),e(C.arrayFormatSeparator);const _=N=>C.skipNull&&x(E[N])||C.skipEmptyString&&E[N]==="",A=m(C),b={};for(const N of Object.keys(E))_(N)||(b[N]=E[N]);const T=Object.keys(b);return C.sort!==!1&&T.sort(C.sort),T.map(N=>{const O=E[N];return O===void 0?"":O===null?o(N,C):Array.isArray(O)?O.reduce(A(N),[]).join("&"):o(N,C)+"="+o(O,C)}).filter(N=>N.length>0).join("&")},v.parseUrl=(E,C)=>{C=Object.assign({decode:!0},C);const[_,A]=h(E,"#");return Object.assign({url:_.split("?")[0]||"",query:k(S(E),C)},C&&C.parseFragmentIdentifier&&A?{fragmentIdentifier:c(A,C)}:{})},v.stringifyUrl=(E,C)=>{C=Object.assign({encode:!0,strict:!0},C);const _=t(E.url).split("?")[0]||"",A=v.extract(E.url),b=v.parse(A,{sort:!1}),T=Object.assign(b,E.query);let N=v.stringify(T,C);N&&(N=`?${N}`);let O=d(E.url);return E.fragmentIdentifier&&(O=`#${o(E.fragmentIdentifier,C)}`),`${_}${N}${O}`},v.pick=(E,C,_)=>{_=Object.assign({parseFragmentIdentifier:!0},_);const{url:A,query:b,fragmentIdentifier:T}=v.parseUrl(E,_);return v.stringifyUrl({url:A,query:y(b,C),fragmentIdentifier:T},_)},v.exclude=(E,C,_)=>{const A=Array.isArray(C)?b=>!C.includes(b):(b,T)=>!C(b,T);return v.pick(E,A,_)}},"./node_modules/sdp-transform/lib/grammar.js":function(I,v){var l=I.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return a.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return a.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(a){return"extmap:%d"+(a.direction?"/%s":"%v")+(a["encrypt-uri"]?" %s":"%v")+" %s"+(a.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return a.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(a){var p="candidate:%s %d %s %d %s %d typ %s";return p+=a.raddr!=null?" raddr %s rport %d":"%v%v",p+=a.tcptype!=null?" tcptype %s":"%v",a.generation!=null&&(p+=" generation %d"),p+=a["network-id"]!=null?" network-id %d":"%v",p+=a["network-cost"]!=null?" network-cost %d":"%v",p}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(a){var p="ssrc:%d";return a.attribute!=null&&(p+=" %s",a.value!=null&&(p+=":%s")),p}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(a){return a.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(a){return a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(a){return"ts-refclk:%s"+(a.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(a){var p="mediaclk:";return p+=a.id!=null?"id=%s %s":"%v%s",p+=a.mediaClockValue!=null?"=%s":"",p+=a.rateNumerator!=null?" rate=%s":"",p+=a.rateDenominator!=null?"/%s":"",p}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(l).forEach(function(a){var p=l[a];p.forEach(function(h){h.reg||(h.reg=/(.*)/),h.format||(h.format="%s")})})},"./node_modules/sdp-transform/lib/index.js":function(I,v,l){var a=l("./node_modules/sdp-transform/lib/parser.js"),p=l("./node_modules/sdp-transform/lib/writer.js");v.write=p,v.parse=a.parse,v.parseParams=a.parseParams,v.parseFmtpConfig=a.parseFmtpConfig,v.parsePayloads=a.parsePayloads,v.parseRemoteCandidates=a.parseRemoteCandidates,v.parseImageAttributes=a.parseImageAttributes,v.parseSimulcastStreamList=a.parseSimulcastStreamList},"./node_modules/sdp-transform/lib/parser.js":function(I,v,l){var a=function(f){return String(Number(f))===f?Number(f):f},p=function(f,e,o,c){if(c&&!o)e[c]=a(f[1]);else for(var i=0;i<o.length;i+=1)f[i+1]!=null&&(e[o[i]]=a(f[i+1]))},h=function(f,e,o){var c=f.name&&f.names;f.push&&!e[f.push]?e[f.push]=[]:c&&!e[f.name]&&(e[f.name]={});var i=f.push?{}:c?e[f.name]:e;p(o.match(f.reg),i,f.names,f.name),f.push&&e[f.push].push(i)},y=l("./node_modules/sdp-transform/lib/grammar.js"),x=RegExp.prototype.test.bind(/^([a-z])=(.*)/);v.parse=function(f){var e={},o=[],c=e;return f.split(/(\r\n|\r|\n)/).filter(x).forEach(function(i){var t=i[0],d=i.slice(2);t==="m"&&(o.push({rtp:[],fmtp:[]}),c=o[o.length-1]);for(var S=0;S<(y[t]||[]).length;S+=1){var B=y[t][S];if(B.reg.test(d))return h(B,c,d)}}),e.media=o,e};var m=function(f,e){var o=e.split(/=(.+)/,2);return o.length===2?f[o[0]]=a(o[1]):o.length===1&&e.length>1&&(f[o[0]]=void 0),f};v.parseParams=function(f){return f.split(/;\s?/).reduce(m,{})},v.parseFmtpConfig=v.parseParams,v.parsePayloads=function(f){return f.toString().split(" ").map(Number)},v.parseRemoteCandidates=function(f){for(var e=[],o=f.split(" ").map(a),c=0;c<o.length;c+=3)e.push({component:o[c],ip:o[c+1],port:o[c+2]});return e},v.parseImageAttributes=function(f){return f.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(m,{})})},v.parseSimulcastStreamList=function(f){return f.split(";").map(function(e){return e.split(",").map(function(o){var c,i=!1;return o[0]!=="~"?c=a(o):(c=a(o.substring(1,o.length)),i=!0),{scid:c,paused:i}})})}},"./node_modules/sdp-transform/lib/writer.js":function(I,v,l){var a=l("./node_modules/sdp-transform/lib/grammar.js"),p=/%[sdv%]/g,h=function(f){var e=1,o=arguments,c=o.length;return f.replace(p,function(i){if(e>=c)return i;var t=o[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}})},y=function(f,e,o){var c=e.format instanceof Function?e.format(e.push?o:o[e.name]):e.format,i=[f+"="+c];if(e.names)for(var t=0;t<e.names.length;t+=1){var d=e.names[t];e.name?i.push(o[e.name][d]):i.push(o[e.names[t]])}else i.push(o[e.name]);return h.apply(null,i)},x=["v","o","s","i","u","e","p","c","b","t","r","z","a"],m=["i","c","b","a"];I.exports=function(f,e){e=e||{},f.version==null&&(f.version=0),f.name==null&&(f.name=" "),f.media.forEach(function(t){t.payloads==null&&(t.payloads="")});var o=e.outerOrder||x,c=e.innerOrder||m,i=[];return o.forEach(function(t){a[t].forEach(function(d){d.name in f&&f[d.name]!=null?i.push(y(t,d,f)):d.push in f&&f[d.push]!=null&&f[d.push].forEach(function(S){i.push(y(t,d,S))})})}),f.media.forEach(function(t){i.push(y("m",a.m[0],t)),c.forEach(function(d){a[d].forEach(function(S){S.name in t&&t[S.name]!=null?i.push(y(d,S,t)):S.push in t&&t[S.push]!=null&&t[S.push].forEach(function(B){i.push(y(d,S,B))})})})}),i.join(`\r
`)+`\r
`}},"./node_modules/socket.io-client/lib/index.js":function(I,v,l){var a=l("./node_modules/socket.io-client/lib/url.js"),p=l("./node_modules/socket.io-parser/index.js"),h=l("./node_modules/socket.io-client/lib/manager.js"),y=l("./node_modules/debug/src/browser.js")("socket.io-client");I.exports=v=m;var x=v.managers={};function m(f,e){typeof f=="object"&&(e=f,f=void 0),e=e||{};var o=a(f),c=o.source,i=o.id,t=o.path,d=x[i]&&t in x[i].nsps,S=e.forceNew||e["force new connection"]||e.multiplex===!1||d,B;return S?(y("ignoring socket cache for %s",c),B=h(c,e)):(x[i]||(y("new io instance for %s",c),x[i]=h(c,e)),B=x[i]),o.query&&!e.query&&(e.query=o.query),B.socket(o.path,e)}v.protocol=p.protocol,v.connect=m,v.Manager=l("./node_modules/socket.io-client/lib/manager.js"),v.Socket=l("./node_modules/socket.io-client/lib/socket.js")},"./node_modules/socket.io-client/lib/manager.js":function(I,v,l){var a=l("./node_modules/engine.io-client/lib/index.js"),p=l("./node_modules/socket.io-client/lib/socket.js"),h=l("./node_modules/component-emitter/index.js"),y=l("./node_modules/socket.io-parser/index.js"),x=l("./node_modules/socket.io-client/lib/on.js"),m=l("./node_modules/component-bind/index.js"),f=l("./node_modules/debug/src/browser.js")("socket.io-client:manager"),e=l("./node_modules/indexof/index.js"),o=l("./node_modules/backo2/index.js"),c=Object.prototype.hasOwnProperty;I.exports=i;function i(t,d){if(!(this instanceof i))return new i(t,d);t&&typeof t=="object"&&(d=t,t=void 0),d=d||{},d.path=d.path||"/socket.io",this.nsps={},this.subs=[],this.opts=d,this.reconnection(d.reconnection!==!1),this.reconnectionAttempts(d.reconnectionAttempts||1/0),this.reconnectionDelay(d.reconnectionDelay||1e3),this.reconnectionDelayMax(d.reconnectionDelayMax||5e3),this.randomizationFactor(d.randomizationFactor||.5),this.backoff=new o({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(d.timeout==null?2e4:d.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var S=d.parser||y;this.encoder=new S.Encoder,this.decoder=new S.Decoder,this.autoConnect=d.autoConnect!==!1,this.autoConnect&&this.open()}i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)c.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},i.prototype.updateSocketIds=function(){for(var t in this.nsps)c.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},i.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id},h(i.prototype),i.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},i.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},i.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},i.prototype.open=i.prototype.connect=function(t,d){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=a(this.uri,this.opts);var S=this.engine,B=this;this.readyState="opening",this.skipReconnect=!1;var k=x(S,"open",function(){B.onopen(),t&&t()}),E=x(S,"error",function(A){if(f("connect_error"),B.cleanup(),B.readyState="closed",B.emitAll("connect_error",A),t){var b=new Error("Connection error");b.data=A,t(b)}else B.maybeReconnectOnOpen()});if(this._timeout!==!1){var C=this._timeout;f("connect attempt will timeout after %d",C),C===0&&k.destroy();var _=setTimeout(function(){f("connect attempt timed out after %d",C),k.destroy(),S.close(),S.emit("error","timeout"),B.emitAll("connect_timeout",C)},C);this.subs.push({destroy:function(){clearTimeout(_)}})}return this.subs.push(k),this.subs.push(E),this},i.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(x(t,"data",m(this,"ondata"))),this.subs.push(x(t,"ping",m(this,"onping"))),this.subs.push(x(t,"pong",m(this,"onpong"))),this.subs.push(x(t,"error",m(this,"onerror"))),this.subs.push(x(t,"close",m(this,"onclose"))),this.subs.push(x(this.decoder,"decoded",m(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(t){this.decoder.add(t)},i.prototype.ondecoded=function(t){this.emit("packet",t)},i.prototype.onerror=function(t){f("error",t),this.emitAll("error",t)},i.prototype.socket=function(t,d){var S=this.nsps[t];if(!S){S=new p(this,t,d),this.nsps[t]=S;var B=this;S.on("connecting",k),S.on("connect",function(){S.id=B.generateId(t)}),this.autoConnect&&k()}function k(){~e(B.connecting,S)||B.connecting.push(S)}return S},i.prototype.destroy=function(t){var d=e(this.connecting,t);~d&&this.connecting.splice(d,1),!this.connecting.length&&this.close()},i.prototype.packet=function(t){f("writing packet %j",t);var d=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),d.encoding?d.packetBuffer.push(t):(d.encoding=!0,this.encoder.encode(t,function(S){for(var B=0;B<S.length;B++)d.engine.write(S[B],t.options);d.encoding=!1,d.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},i.prototype.cleanup=function(){f("cleanup");for(var t=this.subs.length,d=0;d<t;d++){var S=this.subs.shift();S.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(t){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var d=this.backoff.duration();f("will wait %dms before reconnect attempt",d),this.reconnecting=!0;var S=setTimeout(function(){t.skipReconnect||(f("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(B){B?(f("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",B.data)):(f("reconnect success"),t.onreconnect())}))},d);this.subs.push({destroy:function(){clearTimeout(S)}})}},i.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},"./node_modules/socket.io-client/lib/on.js":function(I,v){I.exports=l;function l(a,p,h){return a.on(p,h),{destroy:function(){a.removeListener(p,h)}}}},"./node_modules/socket.io-client/lib/socket.js":function(I,v,l){var a=l("./node_modules/socket.io-parser/index.js"),p=l("./node_modules/component-emitter/index.js"),h=l("./node_modules/to-array/index.js"),y=l("./node_modules/socket.io-client/lib/on.js"),x=l("./node_modules/component-bind/index.js"),m=l("./node_modules/debug/src/browser.js")("socket.io-client:socket"),f=l("./node_modules/parseqs/index.js"),e=l("./node_modules/has-binary2/index.js");I.exports=i;var o={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},c=p.prototype.emit;function i(t,d,S){this.io=t,this.nsp=d,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},S&&S.query&&(this.query=S.query),this.io.autoConnect&&this.open()}p(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[y(t,"open",x(this,"onopen")),y(t,"packet",x(this,"onpacket")),y(t,"close",x(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},i.prototype.send=function(){var t=h(arguments);return t.unshift("message"),this.emit.apply(this,t),this},i.prototype.emit=function(t){if(o.hasOwnProperty(t))return c.apply(this,arguments),this;var d=h(arguments),S={type:(this.flags.binary!==void 0?this.flags.binary:e(d))?a.BINARY_EVENT:a.EVENT,data:d};return S.options={},S.options.compress=!this.flags||this.flags.compress!==!1,typeof d[d.length-1]=="function"&&(m("emitting packet with ack id %d",this.ids),this.acks[this.ids]=d.pop(),S.id=this.ids++),this.connected?this.packet(S):this.sendBuffer.push(S),this.flags={},this},i.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},i.prototype.onopen=function(){if(m("transport is open - connecting"),this.nsp!=="/")if(this.query){var t=typeof this.query=="object"?f.encode(this.query):this.query;m("sending connect packet with query %s",t),this.packet({type:a.CONNECT,query:t})}else this.packet({type:a.CONNECT})},i.prototype.onclose=function(t){m("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},i.prototype.onpacket=function(t){var d=t.nsp===this.nsp,S=t.type===a.ERROR&&t.nsp==="/";if(!(!d&&!S))switch(t.type){case a.CONNECT:this.onconnect();break;case a.EVENT:this.onevent(t);break;case a.BINARY_EVENT:this.onevent(t);break;case a.ACK:this.onack(t);break;case a.BINARY_ACK:this.onack(t);break;case a.DISCONNECT:this.ondisconnect();break;case a.ERROR:this.emit("error",t.data);break}},i.prototype.onevent=function(t){var d=t.data||[];m("emitting event %j",d),t.id!=null&&(m("attaching ack callback to event"),d.push(this.ack(t.id))),this.connected?c.apply(this,d):this.receiveBuffer.push(d)},i.prototype.ack=function(t){var d=this,S=!1;return function(){if(!S){S=!0;var B=h(arguments);m("sending ack %j",B),d.packet({type:e(B)?a.BINARY_ACK:a.ACK,id:t,data:B})}}},i.prototype.onack=function(t){var d=this.acks[t.id];typeof d=="function"?(m("calling ack %s with %j",t.id,t.data),d.apply(this,t.data),delete this.acks[t.id]):m("bad ack %s",t.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},i.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)c.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){m("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(m("performing disconnect (%s)",this.nsp),this.packet({type:a.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(t){return this.flags.compress=t,this},i.prototype.binary=function(t){return this.flags.binary=t,this}},"./node_modules/socket.io-client/lib/url.js":function(I,v,l){var a=l("./node_modules/parseuri/index.js"),p=l("./node_modules/debug/src/browser.js")("socket.io-client:url");I.exports=h;function h(y,x){var m=y;x=x||typeof location<"u"&&location,y==null&&(y=x.protocol+"//"+x.host),typeof y=="string"&&(y.charAt(0)==="/"&&(y.charAt(1)==="/"?y=x.protocol+y:y=x.host+y),/^(https?|wss?):\/\//.test(y)||(p("protocol-less url %s",y),typeof x<"u"?y=x.protocol+"//"+y:y="https://"+y),p("parse %s",y),m=a(y)),m.port||(/^(http|ws)$/.test(m.protocol)?m.port="80":/^(http|ws)s$/.test(m.protocol)&&(m.port="443")),m.path=m.path||"/";var f=m.host.indexOf(":")!==-1,e=f?"["+m.host+"]":m.host;return m.id=m.protocol+"://"+e+":"+m.port,m.href=m.protocol+"://"+e+(x&&x.port===m.port?"":":"+m.port),m}},"./node_modules/socket.io-parser/binary.js":function(I,v,l){var a=l("./node_modules/isarray/index.js"),p=l("./node_modules/socket.io-parser/is-buffer.js"),h=Object.prototype.toString,y=typeof Blob=="function"||typeof Blob<"u"&&h.call(Blob)==="[object BlobConstructor]",x=typeof File=="function"||typeof File<"u"&&h.call(File)==="[object FileConstructor]";v.deconstructPacket=function(e){var o=[],c=e.data,i=e;return i.data=m(c,o),i.attachments=o.length,{packet:i,buffers:o}};function m(e,o){if(!e)return e;if(p(e)){var c={_placeholder:!0,num:o.length};return o.push(e),c}else if(a(e)){for(var i=new Array(e.length),t=0;t<e.length;t++)i[t]=m(e[t],o);return i}else if(typeof e=="object"&&!(e instanceof Date)){var i={};for(var d in e)i[d]=m(e[d],o);return i}return e}v.reconstructPacket=function(e,o){return e.data=f(e.data,o),e.attachments=void 0,e};function f(e,o){if(!e)return e;if(e&&e._placeholder)return o[e.num];if(a(e))for(var c=0;c<e.length;c++)e[c]=f(e[c],o);else if(typeof e=="object")for(var i in e)e[i]=f(e[i],o);return e}v.removeBlobs=function(e,o){function c(d,S,B){if(!d)return d;if(y&&d instanceof Blob||x&&d instanceof File){i++;var k=new FileReader;k.onload=function(){B?B[S]=this.result:t=this.result,--i||o(t)},k.readAsArrayBuffer(d)}else if(a(d))for(var E=0;E<d.length;E++)c(d[E],E,d);else if(typeof d=="object"&&!p(d))for(var C in d)c(d[C],C,d)}var i=0,t=e;c(t),i||o(t)}},"./node_modules/socket.io-parser/index.js":function(I,v,l){var a=l("./node_modules/debug/src/browser.js")("socket.io-parser"),p=l("./node_modules/component-emitter/index.js"),h=l("./node_modules/socket.io-parser/binary.js"),y=l("./node_modules/isarray/index.js"),x=l("./node_modules/socket.io-parser/is-buffer.js");v.protocol=4,v.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],v.CONNECT=0,v.DISCONNECT=1,v.EVENT=2,v.ACK=3,v.ERROR=4,v.BINARY_EVENT=5,v.BINARY_ACK=6,v.Encoder=m,v.Decoder=i;function m(){}var f=v.ERROR+'"encode error"';m.prototype.encode=function(k,E){if(a("encoding packet %j",k),v.BINARY_EVENT===k.type||v.BINARY_ACK===k.type)c(k,E);else{var C=e(k);E([C])}};function e(k){var E=""+k.type;if((v.BINARY_EVENT===k.type||v.BINARY_ACK===k.type)&&(E+=k.attachments+"-"),k.nsp&&k.nsp!=="/"&&(E+=k.nsp+","),k.id!=null&&(E+=k.id),k.data!=null){var C=o(k.data);if(C!==!1)E+=C;else return f}return a("encoded %j as %s",k,E),E}function o(k){try{return JSON.stringify(k)}catch{return!1}}function c(k,E){function C(_){var A=h.deconstructPacket(_),b=e(A.packet),T=A.buffers;T.unshift(b),E(T)}h.removeBlobs(k,C)}function i(){this.reconstructor=null}p(i.prototype),i.prototype.add=function(k){var E;if(typeof k=="string")E=t(k),v.BINARY_EVENT===E.type||v.BINARY_ACK===E.type?(this.reconstructor=new S(E),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",E)):this.emit("decoded",E);else if(x(k)||k.base64)if(this.reconstructor)E=this.reconstructor.takeBinaryData(k),E&&(this.reconstructor=null,this.emit("decoded",E));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+k)};function t(k){var E=0,C={type:Number(k.charAt(0))};if(v.types[C.type]==null)return B("unknown packet type "+C.type);if(v.BINARY_EVENT===C.type||v.BINARY_ACK===C.type){for(var _=E+1;k.charAt(++E)!=="-"&&E!=k.length;);var A=k.substring(_,E);if(A!=Number(A)||k.charAt(E)!=="-")throw new Error("Illegal attachments");C.attachments=Number(A)}if(k.charAt(E+1)==="/"){for(var _=E+1;++E;){var b=k.charAt(E);if(b===","||E===k.length)break}C.nsp=k.substring(_,E)}else C.nsp="/";var T=k.charAt(E+1);if(T!==""&&Number(T)==T){for(var _=E+1;++E;){var b=k.charAt(E);if(b==null||Number(b)!=b){--E;break}if(E===k.length)break}C.id=Number(k.substring(_,E+1))}if(k.charAt(++E)){var N=d(k.substr(E)),O=N!==!1&&(C.type===v.ERROR||y(N));if(O)C.data=N;else return B("invalid payload")}return a("decoded %s as %j",k,C),C}function d(k){try{return JSON.parse(k)}catch{return!1}}i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function S(k){this.reconPack=k,this.buffers=[]}S.prototype.takeBinaryData=function(k){if(this.buffers.push(k),this.buffers.length===this.reconPack.attachments){var E=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),E}return null},S.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function B(k){return{type:v.ERROR,data:"parser error: "+k}}},"./node_modules/socket.io-parser/is-buffer.js":function(I,v,l){(function(a){I.exports=x;var p=typeof a=="function"&&typeof a.isBuffer=="function",h=typeof ArrayBuffer=="function",y=function(m){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(m):m.buffer instanceof ArrayBuffer};function x(m){return p&&a.isBuffer(m)||h&&(m instanceof ArrayBuffer||y(m))}}).call(this,l("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/split-on-first/index.js":function(I,v,l){I.exports=(a,p)=>{if(!(typeof a=="string"&&typeof p=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(p==="")return[a];const h=a.indexOf(p);return h===-1?[a]:[a.slice(0,h),a.slice(h+p.length)]}},"./node_modules/strict-uri-encode/index.js":function(I,v,l){I.exports=a=>encodeURIComponent(a).replace(/[!'()*]/g,p=>`%${p.charCodeAt(0).toString(16).toUpperCase()}`)},"./node_modules/to-array/index.js":function(I,v){I.exports=l;function l(a,p){var h=[];p=p||0;for(var y=p||0;y<a.length;y++)h[y-p]=a[y];return h}},"./node_modules/webpack/buildin/global.js":function(I,v){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}I.exports=l},"./node_modules/yeast/index.js":function(I,v,l){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),p=64,h={},y=0,x=0,m;function f(c){var i="";do i=a[c%p]+i,c=Math.floor(c/p);while(c>0);return i}function e(c){var i=0;for(x=0;x<c.length;x++)i=i*p+h[c.charAt(x)];return i}function o(){var c=f(+new Date);return c!==m?(y=0,m=c):c+"."+f(y++)}for(;x<p;x++)h[a[x]]=x;o.encode=f,o.decode=e,I.exports=o},"./package.json":function(I){I.exports=JSON.parse('{"name":"skyway-js","version":"4.4.5","description":"The official JavaScript SDK for SkyWay","main":"dist/skyway.js","types":"skyway-js.d.ts","scripts":{"test":"karma start ./karma.conf.js","clean":"del ./dist","lint":"eslint .","build":"NODE_ENV=production webpack","dev":"webpack -w"},"repository":{"type":"git","url":"git+https://github.com/skyway/skyway-js-sdk"},"files":["dist/skyway.js","skyway-js.d.ts","LICENSE","CHANGELOG.md","README.md"],"author":"NTT Communications Corp.","license":"Apache-2.0","devDependencies":{"babel-loader":"7.1.5","babel-plugin-espower":"2.4.0","babel-plugin-istanbul":"4.1.6","babel-preset-es2015":"^6.24.1","del-cli":"^2.0.0","eslint":"^6.1.0","eslint-config-prettier":"^6.0.0","eslint-plugin-prettier":"^3.1.0","inject-loader":"^4.0.1","karma":"^4.2.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^1.1.2","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^4.0.2","mocha":"^6.2.0","power-assert":"^1.6.1","prettier":"^1.18.2","sinon":"^7.3.2","webpack":"^4.38.0","webpack-cli":"^3.3.6"},"dependencies":{"@jitsi/sdp-interop":"^0.1.13","@types/node":"^12.6.8","detect-browser":"^4.6.0","enum":"^3.0.4","events":"^3.0.0","js-binarypack":"0.0.9","object-sizeof":"^1.4.0","query-string":"^6.8.2","sdp-transform":"^2.11.0","socket.io-client":"^2.2.0","socket.io-parser":"~3.3.0"}}')},"./src/peer.js":function(I,v,l){l.r(v);var a=l("./node_modules/events/events.js"),p=l.n(a),h=l("./node_modules/enum/lib/enum.js"),y=l("./node_modules/socket.io-client/lib/index.js"),x=l.n(y),m=l("./node_modules/query-string/index.js"),f=l.n(m);const e="dispatcher.webrtc.ecl.ntt.com",o=443,c=!0,i=1e4,t="turn.webrtc.ecl.ntt.com",d=443,S={CLIENT:new h.default(["SEND_OFFER","SEND_ANSWER","SEND_CANDIDATE","SEND_LEAVE","ROOM_JOIN","ROOM_LEAVE","ROOM_GET_LOGS","ROOM_GET_USERS","ROOM_SEND_DATA","SFU_GET_OFFER","SFU_ANSWER","SFU_CANDIDATE","PING","UPDATE_CREDENTIAL","SEND_FORCE_CLOSE"]),SERVER:new h.default(["OPEN","ERROR","OFFER","ANSWER","CANDIDATE","LEAVE","AUTH_EXPIRES_IN","ROOM_LOGS","ROOM_USERS","ROOM_DATA","ROOM_USER_JOIN","ROOM_USER_LEAVE","SFU_OFFER","FORCE_CLOSE"])},B=16300,k=20*1024*1024;var O={DISPATCHER_HOST:e,DISPATCHER_PORT:o,DISPATCHER_SECURE:c,DISPATCHER_TIMEOUT:i,TURN_HOST:t,TURN_PORT:d,MESSAGE_TYPES:S,maxChunkSize:B,maxDataSize:k,minBroadcastIntervalMs:100,maxNumberOfAttempts:10,reconnectionAttempts:2,numberServersToTry:3,sendInterval:1,pingInterval:25e3,defaultConfig:{iceServers:[{urls:"stun:stun.webrtc.ecl.ntt.com:3478",url:"stun:stun.webrtc.ecl.ntt.com:3478"}],iceTransportPolicy:"all"}};const U="SkyWay: ",V=new h.default({NONE:0,ERROR:1,WARN:2,FULL:3});class L{constructor(){this._logLevel=V.NONE.value,this.LOG_LEVELS=V}setLogLevel(r){switch(r.value&&(r=r.value),parseInt(r,10)){case 0:this._logLevel=V.NONE.value;break;case 1:this._logLevel=V.ERROR.value;break;case 2:this._logLevel=V.WARN.value;break;case 3:this._logLevel=V.FULL.value;break;default:this._logLevel=V.NONE.value;break}}warn(...r){this._logLevel>=V.WARN.value&&console.warn(U,...r)}error(...r){this._logLevel>=V.ERROR.value&&console.error(U,...r)}log(...r){this._logLevel>=V.FULL.value&&console.log(U,...r)}}var P=new L,W=l("./node_modules/detect-browser/index.js");function G(te){return!te||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(te)}function Y(te){return!te||/^[a-z0-9]{8}(-[a-z0-9]{4}){3}-[a-z0-9]{12}$/.exec(te)}function ne(){return(Math.random().toString(36)+"0000000000000000000").substr(2,16)}function se(){return Math.random().toString(36).substr(2)}function Be(te){const r=te.reduce((j,z)=>j+z.byteLength,0),u=new Uint8Array(r);let R=0;for(const j of te)u.set(new Uint8Array(j),R),R+=j.byteLength;return u.buffer}function Re(te,r){const u=new FileReader;u.onload=R=>{r(R.target.result)},u.readAsArrayBuffer(te)}function Oe(){return location.protocol==="https:"}function Ne(){const{name:te,version:r}=Object(W.detect)(),[u,R,j]=r.split(".").map(z=>parseInt(z));return{name:te,major:u,minor:R,patch:j}}function Z(){const{name:te}=Object(W.detect)();return!(!(te==="safari"||te==="ios")||RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))}var X={validateId:G,validateKey:Y,randomId:ne,randomToken:se,joinArrayBuffers:Be,blobToArrayBuffer:Re,isSecure:Oe,detectBrowser:Ne,isPlanBSafari:Z},ve=l("./package.json");class Ee extends p.a{constructor(r,u){if(super(),this._isOpen=!1,this._isPeerIdSet=!1,this._queue=[],this._io=null,this._key=r,this._reconnectAttempts=0,u.host&&u.port){const R=u.secure?"https://":"http://";this.signalingServerUrl=`${R}${u.host}:${u.port}`}else{const R=u.dispatcherHost||O.DISPATCHER_HOST,j=u.dispatcherPort||O.DISPATCHER_PORT,J=u.dispatcherSecure||O.DISPATCHER_SECURE?"https://":"http://";this._dispatcherUrl=`${J}${R}:${j}/signaling`}}get isOpen(){return!!(this._io&&this._io.connected&&this._isOpen)}async start(r,u,R){let j=`apiKey=${this._key}&token=${u}&platform=javascript&sdk_version=${ve.version}`;if(r&&(j+=`&peerId=${r}`,this._isPeerIdSet=!0),R){const re=encodeURIComponent(JSON.stringify(R));j+=`&credential=${re}`}if(this._dispatcherUrl)try{this.signalingServerUrl=await this._fetchSignalingServerUrlWithRetry()}catch(re){this.emit("error",re);return}const z=X.detectBrowser(),ee=(z.name==="ios"||z.name==="safari")&&z.major>=15?["polling"]:["polling","websocket"];this._io=x()(this.signalingServerUrl,{"force new connection":!0,query:j,reconnectionAttempts:O.reconnectionAttempts,transports:ee}),this._io.on("reconnect_failed",()=>{this._stopPings(),this._connectToNewServer()}),this._io.on("error",re=>{P.error(re)}),this._setupMessageHandlers()}async _connectToNewServer(){if(this._reconnectAttempts>=O.numberServersToTry){this.emit("error","Could not connect to server.");return}try{this.signalingServerUrl=await this._fetchSignalingServerUrlWithRetry()}catch(r){this.emit("error",r);return}this._io.io.uri=this.signalingServerUrl,this._io.connect(),this._reconnectAttempts++}async _fetchSignalingServerUrlWithRetry(){for(let r=0;r<O.maxNumberOfAttempts;r++){const u=await this._fetchSignalingServer().catch(R=>{P.warn(R)});if(u&&u.port&&u.host&&(!this.signalingServerUrl||this.signalingServerUrl.indexOf(u.host)===-1))return`${u.secure?"https://":"http://"}${u.host}:${u.port}`}throw new Error("Could not get signaling server url.")}_fetchSignalingServer(){return new Promise((r,u)=>{const R=new XMLHttpRequest;R.timeout=O.DISPATCHER_TIMEOUT,R.open("GET",this._dispatcherUrl,!0),R.onerror=()=>{u(new Error("There was a problem with the request for the dispatcher. Check your peer options and network connections."))},R.onabort=()=>{u(new Error("The request for the dispatcher was aborted."))},R.ontimeout=()=>{u(new Error("The request for the dispatcher timed out. Check your firewall, network speed, SkyWay failure information"))},R.onload=()=>{if(R.status!==200){u(new Error("Connection failed. Unexpected response: "+R.status));return}try{const j=JSON.parse(R.responseText);if(j&&j.domain){r({host:j.domain,port:443,secure:!0});return}u(new Error("The dispatcher server returned an invalid JSON response. have no signaling server domain in JSON."))}catch{u(new Error("The dispatcher server returned an invalid JSON response."))}},R.send(null)})}send(r,u){if(!r){this._io.emit("error","Invalid message");return}if(!this.isOpen){this._queue.push({type:r,message:u});return}this._io.connected===!0&&this._io.emit(r,u)}close(){this.isOpen&&(this._stopPings(),this._io.disconnect(),this._isOpen=!1)}reconnect(){this._io.connect()}updateCredential(r){const u=f.a.parse(this._io.io.opts.query);u.credential?u.credential=encodeURIComponent(JSON.stringify(r)):P.warn("Adding a credential when one wasn't specified before."),this._io.io.opts.query=f.a.stringify(u),this.send(O.MESSAGE_TYPES.CLIENT.UPDATE_CREDENTIAL.key,r)}_setupMessageHandlers(){O.MESSAGE_TYPES.SERVER.enums.forEach(r=>{r.key===O.MESSAGE_TYPES.SERVER.OPEN.key?this._io.on(r.key,u=>{!u||!u.peerId||(this._isPeerIdSet||(this._io.io.opts.query+=`&peerId=${u.peerId}`,this._isPeerIdSet=!0),this._reconnectAttempts=0,this._startPings(),this._sendQueuedMessages(),this._isOpen||(this._isOpen=!0,this.emit(r.key,u)))}):this._io.on(r.key,u=>{this.emit(r.key,u)})})}_sendQueuedMessages(){for(const r of this._queue)this.send(r.type,r.message);this._queue=[]}_startPings(){this._pingIntervalId||(this._pingIntervalId=setInterval(()=>{this.send(O.MESSAGE_TYPES.CLIENT.PING.key)},O.pingInterval))}_stopPings(){clearInterval(this._pingIntervalId),this._pingIntervalId=void 0}}var Ce=Ee,Ae=l("./node_modules/sdp-transform/lib/index.js"),ye=l.n(Ae),Fe=l("./node_modules/@jitsi/sdp-interop/lib/index.js");class Ie{unifiedToPlanB(r){const R=new Fe.Interop().toPlanB(r).sdp,j=new Set,z=/a=ssrc:\d+ msid:(\w+)/g;let J;for(;J=z.exec(R);)j.add(J[1]);const ee=R.replace("a=msid-semantic:WMS *",`a=msid-semantic:WMS ${Array.from(j).join(" ")}`);return new RTCSessionDescription({type:"offer",sdp:ee})}addVideoBandwidth(r,u){return this._validateBandwidth(u),this._addBandwidth(r,u,"video")}addAudioBandwidth(r,u){return this._validateBandwidth(u),this._addBandwidth(r,u,"audio")}filterVideoCodec(r,u){return this._filterCodec(r,u,"video")}filterAudioCodec(r,u){return this._filterCodec(r,u,"audio")}ensureUnifiedPlan(r){const u=`\r
`;return r.split(u).map(R=>R.startsWith("a=msid-semantic")?"a=msid-semantic:WMS *":R).join(u)}_filterCodec(r,u,R){if(u===void 0)throw new Error("codec is not passed");const j=ye.a.parse(r);return j.media=j.media.map(z=>{if(z.type===R){z.rtp=z.rtp.filter(ee=>ee.codec===u);const J=z.rtp.reduce((ee,re)=>[...ee,re.payload],[]);if(z.rtp.length===0)throw new Error(`${u} does not exist`);z.fmtp&&(z.fmtp=z.fmtp.filter(ee=>J.includes(ee.payload))),z.rtcpFb&&(z.rtcpFb=z.rtcpFb.filter(ee=>J.includes(ee.payload))),z.payloads=J.join(" ")}return z}),ye.a.write(j)}_addBandwidth(r,u,R){const j=ye.a.parse(r);return j.media=j.media.map(z=>(z.type===R&&(z.bandwidth=[{type:"AS",limit:u.toString()},{type:"TIAS",limit:(u*1e3).toString()}]),z)),ye.a.write(j)}_validateBandwidth(r){if(r===void 0)throw new Error("bandwidth is not passed");if(!/^\d+$/.test(r))throw new Error(`${r} is not a number`)}}var le=new Ie;const Pe=new h.default(["addStream","dcCreated","offerCreated","answerCreated","iceCandidate","iceConnectionFailed","negotiationNeeded","error"]);class Q extends p.a{constructor(){super(),this._offerQueue=[],this._isExpectingAnswer=!1,this._isNegotiationAllowed=!0,this._isExecutingHandleOffer=!1,this.hasRemoteDescription=!1}async startConnection(r={}){if(this._pc=this._createPeerConnection(r.pcConfig),this._setupPCListeners(),this.originator=r.originator,this._audioBandwidth=r.audioBandwidth,this._videoBandwidth=r.videoBandwidth,this._audioCodec=r.audioCodec,this._videoCodec=r.videoCodec,this._type=r.type,this._type==="media")if(r.stream){const u=r.stream.getVideoTracks(),R=r.stream.getAudioTracks(),j=this._getReceiveOnlyState(r);u.length>0?u.forEach(z=>this._pc.addTrack(z,r.stream)):j.video&&this._pc.addTransceiver("video",{direction:"recvonly"}),R.length>0?R.forEach(z=>this._pc.addTrack(z,r.stream)):j.audio&&this._pc.addTransceiver("audio",{direction:"recvonly"})}else this.originator&&(this._pc.addTransceiver("audio",{direction:"recvonly"}),this._pc.addTransceiver("video",{direction:"recvonly"}));if(this.originator){if(this._type==="data"){const u=r.label||"",R=r.dcInit||{},j=this._pc.createDataChannel(u,R);this.emit(Q.EVENTS.dcCreated.key,j)}}else await this.handleOffer(r.offer)}replaceStream(r){if(!this._pc)return;this._isNegotiationAllowed=!0;const u=this,R=r.getVideoTracks(),j=r.getAudioTracks(),z=this._pc.getSenders(),J=z.find(ae=>ae.track&&ae.track.kind==="video"),ee=z.find(ae=>ae.track&&ae.track.kind==="audio");re(J,R[0],r),re(ee,j[0],r);function re(ae,pe,De){if(!(pe===void 0&&ae===void 0)){if(pe===void 0){u._pc.removeTrack(ae);return}if(ae===void 0){u._pc.addTrack(pe,De);return}ae.track.id!==pe.id&&ae.replaceTrack(pe)}}}async handleOffer(r){if(this._lastOffer&&r&&this._lastOffer.sdp===r.sdp)return;if(this._isNegotiationAllowed=!0,this._pc.signalingState==="have-remote-offer"||this._isExecutingHandleOffer){this._offerQueue.push(r);return}this._lastOffer=r,this._isExecutingHandleOffer=!0;let u;try{await this._setRemoteDescription(r),u=await this._makeAnswerSdp().catch(R=>P.error(R))}finally{this._isExecutingHandleOffer=!1}if(this._pc.signalingState==="stable"){const R=this._offerQueue.shift();R&&this.handleOffer(R)}this.emit(Q.EVENTS.answerCreated.key,u)}async handleAnswer(r){this._isNegotiationAllowed=!0,this._isExpectingAnswer?(await this._setRemoteDescription(r),this._isExpectingAnswer=!1):this._pc.onnegotiationneeded&&this._pc.onnegotiationneeded()}async handleCandidate(r){this._pc&&await this._pc.addIceCandidate(new RTCIceCandidate(r)).then(()=>P.log("Successfully added ICE candidate")).catch(u=>P.error("Failed to add ICE candidate",u))}cleanup(){P.log("Cleaning up PeerConnection"),this._pc&&(this._pc.readyState!=="closed"||this._pc.signalingState!=="closed")&&this._pc.close(),this._pc=null}_createPeerConnection(r={}){return P.log("Creating RTCPeerConnection"),r.sdpSemantics="unified-plan",new RTCPeerConnection(r)}_setupPCListeners(){const r=this._pc;r.ontrack=u=>{P.log("Received remote media stream track"),u.streams.forEach(R=>{this.emit(Q.EVENTS.addStream.key,R)})},r.ondatachannel=u=>{P.log("Received data channel");const R=u.channel;this.emit(Q.EVENTS.dcCreated.key,R)},r.onicecandidate=u=>{if(!u.candidate||u.candidate.candidate===""){P.log("ICE candidates gathering complete");return}P.log("Generated ICE candidate for:",u.candidate),this.emit(Q.EVENTS.iceCandidate.key,u.candidate)},r.oniceconnectionstatechange=()=>{switch(r.iceConnectionState){case"completed":P.log("iceConnectionState is completed"),r.onicecandidate=()=>{};break;case"disconnected":P.log("iceConnectionState is disconnected, trying reconnect by browser");break;case"failed":P.log("iceConnectionState is failed, closing connection"),this.emit(Q.EVENTS.iceConnectionFailed.key);break;default:P.log(`iceConnectionState is ${r.iceConnectionState}`);break}},r.onconnectionstatechange=()=>{P.log(`connectionState is ${r.connectionState}`),r.connectionState==="failed"&&r.iceConnectionState==="disconnected"&&(P.log("connectionState is failed, closing connection"),this.emit(Q.EVENTS.iceConnectionFailed.key))},r.onnegotiationneeded=async()=>{if(P.log("`negotiationneeded` triggered"),r.signalingState==="stable"&&this._isNegotiationAllowed&&(this._isNegotiationAllowed=!1,this.originator)){const u=await this._makeOfferSdp();this._setLocalDescription(u),this.emit(Q.EVENTS.negotiationNeeded.key)}},r.onsignalingstatechange=()=>{if(P.log(`signalingState is ${r.signalingState}`),r.signalingState==="stable"&&!this._isExecutingHandleOffer){const u=this._offerQueue.shift();u&&this.handleOffer(u)}}}async _makeOfferSdp(){let r;try{r=await this._pc.createOffer()}catch(u){throw u.type="webrtc",P.error(u),this.emit(Q.EVENTS.error.key,u),P.log("Failed to createOffer, ",u),u}return P.log("Created offer."),this._audioBandwidth&&(r.sdp=le.addAudioBandwidth(r.sdp,this._audioBandwidth)),this._videoBandwidth&&(r.sdp=le.addVideoBandwidth(r.sdp,this._videoBandwidth)),this._audioCodec&&(r.sdp=le.filterAudioCodec(r.sdp,this._audioCodec)),this._videoCodec&&(r.sdp=le.filterVideoCodec(r.sdp,this._videoCodec)),r}async _makeAnswerSdp(){let r;try{r=await this._pc.createAnswer()}catch(u){throw u.type="webrtc",P.error(u),this.emit(Q.EVENTS.error.key,u),P.log("Failed to createAnswer, ",u),u}P.log("Created answer."),this._audioBandwidth&&(r.sdp=le.addAudioBandwidth(r.sdp,this._audioBandwidth)),this._videoBandwidth&&(r.sdp=le.addVideoBandwidth(r.sdp,this._videoBandwidth)),this._audioCodec&&(r.sdp=le.filterAudioCodec(r.sdp,this._audioCodec)),this._videoCodec&&(r.sdp=le.filterVideoCodec(r.sdp,this._videoCodec));try{await this._pc.setLocalDescription(r)}catch(u){throw u.type="webrtc",P.error(u),this.emit(Q.EVENTS.error.key,u),P.log("Failed to setLocalDescription, ",u),u}return P.log("Set localDescription: answer"),P.log(`Setting local description ${JSON.stringify(r.sdp)}`),r}async _setLocalDescription(r){P.log(`Setting local description ${JSON.stringify(r.sdp)}`);try{await this._pc.setLocalDescription(r)}catch(u){throw u.type="webrtc",P.error(u),this.emit(Q.EVENTS.error.key,u),P.log("Failed to setLocalDescription, ",u),u}P.log("Set localDescription: offer"),this._isExpectingAnswer=!0,this.emit(Q.EVENTS.offerCreated.key,r)}async _setRemoteDescription(r){P.log(`Setting remote description ${JSON.stringify(r)}`);try{await this._pc.setRemoteDescription(new RTCSessionDescription(r)),this.hasRemoteDescription=!0}catch(u){throw u.type="webrtc",P.error(u),this.emit(Q.EVENTS.error.key,u),P.log("Failed to setRemoteDescription: ",u),u}P.log("Set remoteDescription:",r.type)}_getReceiveOnlyState(r={}){const u={audio:!1,video:!1},R=r.stream instanceof MediaStream,j=R?r.stream.getAudioTracks().length!==0:!1,z=R?r.stream.getVideoTracks().length!==0:!1;return R===!1&&r.audioReceiveEnabled===void 0&&r.videoReceiveEnabled===void 0?(u.audio=!0,u.video=!0,u):(r.audioReceiveEnabled&&j===!1&&(u.audio=!0),r.videoReceiveEnabled&&z===!1&&(u.video=!0),r.audioReceiveEnabled===!1&&j&&P.warn("Option audioReceiveEnabled will be treated as true, because passed stream has MediaStreamTrack(kind = audio)"),r.videoReceiveEnabled===!1&&z&&P.warn("Option videoReceiveEnabled will be treated as true, because passed stream has MediaStreamTrack(kind = video)"),u)}static get EVENTS(){return Pe}}var ce=Q;const Me=new h.default(["candidate","offer","answer","close","forceClose"]);class he extends p.a{constructor(r,u){if(super(),u=u||{},this.constructor===he)throw new TypeError("Cannot construct Connection instances directly");this._options=u,this.open=!1,this.type=void 0,this.metadata=this._options.metadata,this.remoteId=r,this._negotiator=new ce,this._idPrefix="c_",this._randomIdSuffix=X.randomToken(),this._setupNegotiatorMessageHandlers()}get id(){return this._options.connectionId||this._idPrefix+this._randomIdSuffix}async handleAnswer(r){this._pcAvailable?(await this._negotiator.handleAnswer(r.answer),this.open=!0,this._handleQueuedMessages()):(P.log(`Queuing ANSWER message in ${this.id} from ${this.remoteId}`),this._queuedMessages.push({type:O.MESSAGE_TYPES.SERVER.ANSWER.key,payload:r}))}handleCandidate(r){if(this._negotiator.originator&&!this._negotiator.hasRemoteDescription){this._queuedMessages.push({type:O.MESSAGE_TYPES.SERVER.CANDIDATE.key,payload:r});return}this._pcAvailable?this._negotiator.handleCandidate(r.candidate):(P.log(`Queuing CANDIDATE message in ${this.id} from ${this.remoteId}`),this._queuedMessages.push({type:O.MESSAGE_TYPES.SERVER.CANDIDATE.key,payload:r}))}updateOffer(r){this.open?this._negotiator.handleOffer(r.offer):this._options.payload=r}getPeerConnection(){return this.open?this._negotiator._pc:null}_handleQueuedMessages(){for(const r of this._queuedMessages)switch(r.type){case O.MESSAGE_TYPES.SERVER.ANSWER.key:this.handleAnswer(r.payload);break;case O.MESSAGE_TYPES.SERVER.CANDIDATE.key:this.handleCandidate(r.payload);break;default:P.warn("Unrecognized message type:",r.type,"from peer:",this.remoteId);break}this._queuedMessages=[]}close(r=void 0){this.open&&(this.open=!1,this._negotiator.cleanup(),this.emit(he.EVENTS.close.key),r?this.emit(he.EVENTS.forceClose.key):r===void 0&&P.warn("Default value of the forceClose parameter will change false to true from future versions."))}_setupNegotiatorMessageHandlers(){this._negotiator.on(ce.EVENTS.answerCreated.key,r=>{const u={answer:r,dst:this.remoteId,connectionId:this.id,connectionType:this.type};this.emit(he.EVENTS.answer.key,u)}),this._negotiator.on(ce.EVENTS.offerCreated.key,r=>{const u={offer:r,dst:this.remoteId,connectionId:this.id,connectionType:this.type,metadata:this.metadata};this.serialization&&(u.serialization=this.serialization),this.label&&(u.label=this.label),this.dcInit&&(u.dcInit=this.dcInit),this.emit(he.EVENTS.offer.key,u)}),this._negotiator.on(ce.EVENTS.iceCandidate.key,r=>{const u={candidate:r,dst:this.remoteId,connectionId:this.id,connectionType:this.type};this.emit(he.EVENTS.candidate.key,u)}),this._negotiator.on(ce.EVENTS.iceConnectionFailed.key,()=>{this.close(!1)})}get peer(){return P.warn(`${this.constructor.name}.peer is deprecated and may be removed from a future version. Please use ${this.constructor.name}.remoteId instead.`),this.remoteId}static get EVENTS(){return Me}}var oe=he,je=l("./node_modules/js-binarypack/lib/binarypack.js"),g=l.n(je),n=l("./node_modules/object-sizeof/index.js"),s=l.n(n);const w=new h.default(["open","data","error"]);w.extend(oe.EVENTS.enums);const F=new h.default(["binary","binary-utf8","json","none"]);class M extends oe{constructor(r,u){if(super(r,u),this._idPrefix="dc_",this.type="data",this._isOnOpenCalled=!1,this.label=this._options.label||this.id,this.dcInit=this._options.dcInit||{},this.serialization=M.SERIALIZATIONS.binary.key,this._options.serialization){if(!M.SERIALIZATIONS.get(this._options.serialization))throw new Error("Invalid serialization");this.serialization=this._options.serialization,this._isUnreliableDCInit(this.dcInit)&&(P.warn("You can not specify serialization with unreliable mode enabled."),this.serialization=M.SERIALIZATIONS.binary.key)}this._sendBuffer=[],this._receivedData={},this._queuedMessages=this._options.queuedMessages||[],this._negotiator.on(ce.EVENTS.dcCreated.key,R=>{this._dc=R,this._dc.binaryType="arraybuffer",this._setupMessageHandlers(),!this._isOnOpenCalled&&this._dc.readyState==="open"&&this._dc.onopen()}),this._options.payload&&(this._options.payload.pcConfig=this._options.pcConfig)}async startConnection(){await this._negotiator.startConnection(this._options.payload||{originator:!0,type:"data",label:this.label,dcInit:this.dcInit,pcConfig:this._options.pcConfig}),this._pcAvailable=!0,this._handleQueuedMessages()}_setupMessageHandlers(){this._dc.onopen=()=>{this._isOnOpenCalled||(P.log("Data channel connection success"),this.open=!0,this._isOnOpenCalled=!0,this.emit(M.EVENTS.open.key))},this._dc.onmessage=r=>{this._handleDataMessage(r)},this._dc.onclose=()=>{P.log("DataChannel closed for:",this.id),this.close(!1)},this._dc.onerror=r=>{P.error(r)}}_handleDataMessage(r){if(this.serialization===M.SERIALIZATIONS.none.key){this.emit(M.EVENTS.data.key,r.data);return}else if(this.serialization===M.SERIALIZATIONS.json.key){this.emit(M.EVENTS.data.key,JSON.parse(r.data));return}const u=g.a.unpack(r.data);let R=this._receivedData[u.id];if(R||(R=this._receivedData[u.id]={size:u.size,type:u.type,name:u.name,mimeType:u.mimeType,totalParts:u.totalParts,parts:new Array(u.totalParts),receivedParts:0}),R.receivedParts++,R.parts[u.index]=u.data,R.receivedParts===R.totalParts){delete this._receivedData[u.id];const j=X.joinArrayBuffers(R.parts),z=g.a.unpack(j);let J;switch(R.type){case"Blob":J=new Blob([new Uint8Array(z)],{type:R.mimeType});break;case"File":J=new File([new Uint8Array(z)],R.name,{type:R.mimeType});break;default:J=z}this.emit(M.EVENTS.data.key,J)}}send(r){if(!this.open){this.emit(M.EVENTS.error.key,new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(r==null)return;if(this.serialization===M.SERIALIZATIONS.none.key){this._sendBuffer.push(r),this._startSendLoop();return}else if(this.serialization===M.SERIALIZATIONS.json.key){this._sendBuffer.push(JSON.stringify(r)),this._startSendLoop();return}const u=g.a.pack(r),R=u.size,j=r.constructor.name,z={id:X.randomId(),type:j,size:R,totalParts:0};j==="File"&&(z.name=r.name),r instanceof Blob&&(z.mimeType=r.type);const J=O.maxChunkSize-s()(z),ee=Math.ceil(R/J);z.totalParts=ee;for(let re=0;re<ee;re++){const ae=u.slice(re*J,(re+1)*J);z.index=re,z.data=ae,X.blobToArrayBuffer(g.a.pack(z),pe=>{this._sendBuffer.push(pe),this._startSendLoop()})}}close(r){const u=R=>{super.close(R),this._isOnOpenCalled=!1};if(!this._dc){u(r);return}this._dc.onclose=()=>{P.log("DataChannel closed for:",this.id),u(r)},this._dc.readyState!=="closing"&&(this._dc.readyState==="closed"?u(r):this._dc.close())}_startSendLoop(){this.sendInterval||(this.sendInterval=setInterval(()=>{const r=this._sendBuffer.shift();try{this._dc.send(r)}catch{this._sendBuffer.push(r)}this._sendBuffer.length===0&&(clearInterval(this.sendInterval),this.sendInterval=void 0)},O.sendInterval))}_isUnreliableDCInit(r){return r?"maxRetransmits"in r||"maxPacketLifeTime"in r:!1}static get SERIALIZATIONS(){return F}static get EVENTS(){return w}}var D=M;const H=new h.default(["stream"]);H.extend(oe.EVENTS.enums);class $ extends oe{constructor(r,u){super(r,u),this._idPrefix="mc_",this.type="media",this.localStream=this._options.stream,this._queuedMessages=this._options.queuedMessages||[],this._pcAvailable=!1}async startConnection(){this._options.originator&&(await this._negotiator.startConnection({type:"media",stream:this.localStream,originator:this._options.originator,pcConfig:this._options.pcConfig,videoBandwidth:this._options.videoBandwidth,audioBandwidth:this._options.audioBandwidth,videoCodec:this._options.videoCodec,audioCodec:this._options.audioCodec,videoReceiveEnabled:this._options.videoReceiveEnabled,audioReceiveEnabled:this._options.audioReceiveEnabled}),this._pcAvailable=!0,this._handleQueuedMessages())}answer(r,u={}){if(this.localStream){P.warn("localStream already exists on this MediaConnection. Are you answering a call twice?");return}this._options.payload.stream=r,this.localStream=r,this._negotiator.startConnection({type:"media",stream:this.localStream,originator:!1,offer:this._options.payload.offer,pcConfig:this._options.pcConfig,audioBandwidth:u.audioBandwidth,videoBandwidth:u.videoBandwidth,videoCodec:u.videoCodec,audioCodec:u.audioCodec}),this._pcAvailable=!0,this._handleQueuedMessages(),this.open=!0}replaceStream(r){this._negotiator.replaceStream(r),this.localStream=r}_setupNegotiatorMessageHandlers(){super._setupNegotiatorMessageHandlers(),this._negotiator.on(ce.EVENTS.addStream.key,r=>{P.log("Receiving stream",r),!(this.remoteStream&&this.remoteStream.id===r.id)&&(this.remoteStream=r,this.emit($.EVENTS.stream.key,r))})}static get EVENTS(){return H}}var q=$,ie=l("./node_modules/socket.io-parser/index.js"),K=l.n(ie),Se=l("./node_modules/has-binary2/index.js"),_e=l.n(Se);const ke=["stream","open","close","peerJoin","peerLeave","error","data","log"],We=["offer","answer","candidate","leave","close","getLog","broadcast"],$e=new h.default(ke),qe=new h.default(We);class we extends p.a{constructor(r,u,R={}){if(super(),this.constructor===we)throw new TypeError("Cannot construct Room instances directly");this.name=r,this._options=R,this._peerId=u,this._localStream=this._options.stream,this._pcConfig=this._options.pcConfig,this.lastSent=0,this.messageQueue=[],this.sendIntervalID=null}validateSendDataSize(r){const u=_e()([r]),R={type:u?K.a.BINARY_EVENT:K.a.EVENT,data:[r]},j=new K.a.Encoder;let z;j.encode(R,ee=>{z=u?ee[1].byteLength:ee[0].length});const J=O.maxDataSize;if(z>J)throw new Error("The size of data to send must be less than 20 MB");return!0}_sendData(r,u){const R=O.minBroadcastIntervalMs,j=Date.now(),z=j-this.lastsend;if(this.messageQueue.length==0&&z>=R){this.lastsend=j,this.emit(u,r);return}this.messageQueue.push({msg:r,key:u}),this.sendIntervalID===null&&(this.sendIntervalID=setInterval(()=>{if(this.messageQueue.length===0){clearInterval(this.sendIntervalID),this.sendIntervalID=null;return}const J=this.messageQueue.shift();this.lastsend=Date.now(),this.emit(J.key,J.msg)},R))}handleData(r){const u={data:r.data,src:r.src};this.emit(we.EVENTS.data.key,u)}handleLog(r){this.emit(we.EVENTS.log.key,r)}getLog(){const r={roomName:this.name};this.emit(we.MESSAGE_EVENTS.getLog.key,r)}static get EVENTS(){return $e}static get MESSAGE_EVENTS(){return qe}}var xe=we;const Je=["offerRequest","candidate"],Le=new h.default([]);Le.extend(xe.EVENTS.enums);const ze=new h.default(Je);ze.extend(xe.MESSAGE_EVENTS.enums);class ue extends xe{constructor(r,u,R){super(r,u,R),this.remoteStreams={},this.members=[],this._open=!1,this._msidMap={},this._unknownStreams={},this._negotiator=new ce}call(r){r&&(this._localStream=r);const u={roomName:this.name};this.emit(ue.MESSAGE_EVENTS.offerRequest.key,u)}handleOffer(r){let u=r.offer;X.isPlanBSafari()&&(u=le.unifiedToPlanB(u)),this._connectionStarted?this._negotiator.handleOffer(u):(this._negotiator.startConnection({type:"media",stream:this._localStream,pcConfig:this._options.pcConfig,offer:u}),this._setupNegotiatorMessageHandlers(),this._connectionStarted=!0)}_setupNegotiatorMessageHandlers(){this._negotiator.on(ce.EVENTS.addStream.key,r=>{const u=r;if(this._msidMap[u.id]){if(u.peerId=this._msidMap[u.id],u.peerId===this._peerId)return;const R=this.remoteStreams[u.id];if(R&&R.id===u.id)return;this.remoteStreams[u.id]=u,this.emit(ue.EVENTS.stream.key,u),P.log(`Received remote media stream for ${u.peerId} in ${this.name}`)}else this._unknownStreams[u.id]=u}),this._negotiator.on(ce.EVENTS.negotiationNeeded.key,()=>{const r={roomName:this.name};this.emit(ue.MESSAGE_EVENTS.offerRequest.key,r)}),this._negotiator.on(ce.EVENTS.answerCreated.key,r=>{X.isPlanBSafari()||(r.sdp=le.ensureUnifiedPlan(r.sdp));const u={roomName:this.name,answer:r};this.emit(ue.MESSAGE_EVENTS.answer.key,u)}),this._negotiator.on(ce.EVENTS.iceConnectionFailed.key,()=>{this.close()}),this._negotiator.on(ce.EVENTS.iceCandidate.key,r=>{const u={roomName:this.name,candidate:r};this.emit(ue.MESSAGE_EVENTS.candidate.key,u)})}handleJoin(r){const{src:u,roomMembers:R}=r;if(u===this._peerId){this._open=!0,this.members=R.filter(j=>j!==u),this.call(this._localStream),this.emit(ue.EVENTS.open.key);return}this.members.push(u),this.emit(ue.EVENTS.peerJoin.key,u)}handleLeave(r){if(!this._open)return;const u=r.src,R=this.members.indexOf(u);R>=0&&this.members.splice(R,1);for(const j in this.remoteStreams)this.remoteStreams[j].peerId===u&&(delete this.remoteStreams[j],delete this._msidMap[j],delete this._unknownStreams[j]);this.emit(ue.EVENTS.peerLeave.key,u)}send(r){if(!this._open||!this.validateSendDataSize(r))return;const u={roomName:this.name,data:r};this._sendData(u,ue.MESSAGE_EVENTS.broadcast.key)}close(){if(!this._open)return;this._negotiator&&this._negotiator.cleanup(),this._open=!1;const r={roomName:this.name};this.emit(ue.MESSAGE_EVENTS.leave.key,r),this.emit(ue.EVENTS.close.key)}replaceStream(r){this._localStream=r,this._negotiator.replaceStream(r)}updateMsidMap(r={}){this._msidMap=r;for(const u of Object.keys(this._unknownStreams))if(this._msidMap[u]){const R=this._unknownStreams[u];if(R.peerId=this._msidMap[R.id],delete this._unknownStreams[u],R.peerId===this._peerId)return;this.remoteStreams[R.id]=R,this.emit(ue.EVENTS.stream.key,R)}}getPeerConnection(){return this._connectionStarted?this._negotiator._pc:null}static get EVENTS(){return Le}static get MESSAGE_EVENTS(){return ze}}var ge=ue;const Xe=["broadcastByDC","getPeers"],Ge=new h.default([]);Ge.extend(xe.EVENTS.enums);const Ye=new h.default(Xe);Ye.extend(xe.MESSAGE_EVENTS.enums);class fe extends xe{constructor(r,u,R){super(r,u,R),this.connections={},this._queuedMessages={}}call(r){r&&(this._localStream=r);const u={roomName:this.name,type:"media"};this.emit(fe.MESSAGE_EVENTS.getPeers.key,u)}connect(){const r={roomName:this.name,type:"data"};this.emit(fe.MESSAGE_EVENTS.getPeers.key,r)}makeMediaConnections(r){const u={stream:this._localStream,pcConfig:this._pcConfig,originator:!0,videoBandwidth:this._options.videoBandwidth,audioBandwidth:this._options.audioBandwidth,videoCodec:this._options.videoCodec,audioCodec:this._options.audioCodec,videoReceiveEnabled:this._options.videoReceiveEnabled,audioReceiveEnabled:this._options.audioReceiveEnabled};this._makeConnections(r,"media",u)}makeDataConnections(r){const u={pcConfig:this._pcConfig};this._makeConnections(r,"data",u)}handleJoin(r){const u=r.src;if(u===this._peerId){this.call(this._localStream),this.emit(fe.EVENTS.open.key);return}this.emit(fe.EVENTS.peerJoin.key,u)}handleLeave(r){const u=r.src;this._deleteConnections(u),this.emit(fe.EVENTS.peerLeave.key,u)}handleOffer(r){const u=r.connectionId;let R=this._getConnection(r.src,u);if(R){R.updateOffer(r);return}if(r.connectionType==="media"){if(this._hasConnection(r.src)&&this._peerId>r.src)return;R=new q(r.src,{connectionId:u,payload:r,metadata:r.metadata,queuedMessages:this._queuedMessages[u],pcConfig:this._pcConfig}),R.startConnection(),P.log("MediaConnection created in OFFER"),this._addConnection(r.src,R),this._setupMessageHandlers(R),R.answer(this._localStream,{videoBandwidth:this._options.videoBandwidth,audioBandwidth:this._options.audioBandwidth,videoCodec:this._options.videoCodec,audioCodec:this._options.audioCodec,videoReceiveEnabled:this._options.videoReceiveEnabled,audioReceiveEnabled:this._options.audioReceiveEnabled})}else P.warn(`Received malformed connection type: ${r.connectionType}`)}handleAnswer(r){const u=this._getConnection(r.src,r.connectionId);u&&u.handleAnswer(r)}handleCandidate(r){const u=this._getConnection(r.src,r.connectionId);u?u.handleCandidate(r):(this._queuedMessages[r.connectionId]===void 0&&(this._queuedMessages[r.connectionId]=[]),this._queuedMessages[r.connectionId].push({type:O.MESSAGE_TYPES.SERVER.CANDIDATE.key,payload:r}))}send(r){if(!this.validateSendDataSize(r))return;const u={roomName:this.name,data:r};this._sendData(u,fe.MESSAGE_EVENTS.broadcast.key)}close(){for(const u in this.connections)this.connections.hasOwnProperty(u)&&this.connections[u].forEach(R=>{R.close(!1)});const r={roomName:this.name};this.emit(fe.MESSAGE_EVENTS.leave.key,r),this.emit(fe.EVENTS.close.key)}replaceStream(r){this._localStream=r;for(const u in this.connections)this.connections.hasOwnProperty(u)&&this.connections[u].forEach(R=>{R.type==="media"&&R.replaceStream(r)})}getPeerConnections(){const r={};for(const[u,[R]]of Object.entries(this.connections)){const j=R.getPeerConnection();j&&(r[u]=j)}return r}_addConnection(r,u){this.connections[r]||(this.connections[r]=[]),this.connections[r].push(u)}_makeConnections(r,u,R){r.filter(j=>j!==this._peerId).filter(j=>!this._hasConnection(j)).forEach(j=>{let z;switch(u){case"data":z=new D(j,R);break;case"media":z=new q(j,R);break;default:return}z.startConnection(),this._addConnection(j,z),this._setupMessageHandlers(z),P.log(`${u} connection to ${j} created in ${this.name}`)})}_deleteConnections(r){this.connections[r]&&(this.connections[r].forEach(u=>{u.close(!1)}),delete this.connections[r])}_getConnection(r,u){return this.connections&&this.connections[r]?this.connections[r].filter(j=>j.id===u)[0]:null}_hasConnection(r){return this.connections[r]&&this.connections[r].length>0}_setupMessageHandlers(r){r.on(oe.EVENTS.offer.key,u=>{u.roomName=this.name,this.emit(fe.MESSAGE_EVENTS.offer.key,u)}),r.on(oe.EVENTS.answer.key,u=>{u.roomName=this.name,this.emit(fe.MESSAGE_EVENTS.answer.key,u)}),r.on(oe.EVENTS.candidate.key,u=>{u.roomName=this.name,this.emit(fe.MESSAGE_EVENTS.candidate.key,u)}),r.type==="media"&&r.on(q.EVENTS.stream.key,u=>{u.peerId=r.remoteId,this.emit(fe.EVENTS.stream.key,u)})}static get EVENTS(){return Ge}static get MESSAGE_EVENTS(){return Ye}}var be=fe;const Ke=new h.default(["open","error","call","connection","expiresin","close","disconnected"]);class de extends p.a{constructor(r,u){super(),this.connections={},this.rooms={},this._queuedMessages={},r&&r.constructor===Object?(u=r,r=void 0):r&&(r=r.toString());const R={debug:P.LOG_LEVELS.NONE,secure:!0,config:O.defaultConfig,turn:!0,dispatcherSecure:O.DISPATCHER_SECURE,dispatcherHost:O.DISPATCHER_HOST,dispatcherPort:O.DISPATCHER_PORT};if(this.options=Object.assign({},R,u),this.options.token=X.randomToken(),P.setLogLevel(this.options.debug),!X.validateId(r)){this._abort("invalid-id",`ID "${r}" is invalid`);return}if(!X.validateKey(u.key)){this._abort("invalid-key",`API KEY "${this.options.key}" is invalid`);return}this.options.host==="/"&&(this.options.host=window.location.hostname),u.secure===void 0&&this.options.port!==443&&(this.options.secure=void 0),this._initializeServerConnection(r)}call(r,u,R={}){if(!this._checkOpenStatus())return;R.originator=!0,R.stream=u,R.pcConfig=this._pcConfig;const j=new q(r,R);return j.startConnection(),P.log("MediaConnection created in call method"),this._addConnection(r,j),j}connect(r,u={}){if(!this._checkOpenStatus())return;u.pcConfig=this._pcConfig;const R=new D(r,u);return R.startConnection(),P.log("DataConnection created in connect method"),this._addConnection(r,R),R}joinRoom(r,u={}){if(this._checkOpenStatus()){if(!r){const R=new Error("Room name must be defined.");return R.type="room-error",P.error(R),this.emit(de.EVENTS.error.key,R),null}return u.pcConfig=this._pcConfig,u.peerId=this.id,u.mode==="sfu"?this._initializeSfuRoom(r,u):this._initializeFullMeshRoom(r,u)}}getConnection(r,u){if(this._checkOpenStatus()){if(this.connections[r]){for(const R of this.connections[r])if(R.id===u)return R}return null}}get open(){return this.socket&&this.socket.isOpen}destroy(){this._cleanup(),this.disconnect(!0)}disconnect(r=!1){r||P.warn("Use peer's destroy method instead. This method may be removed in future versions."),this.open&&(this.socket.close(),this.emit(de.EVENTS.disconnected.key,this.id))}reconnect(){P.warn("Recreate peer instance instead. This method may be removed in future versions."),this.open||this.socket.reconnect()}updateCredential(r){this.socket.updateCredential(r)}listAllPeers(r){if(!this._checkOpenStatus())return;r=r||function(){};const u=this,R=new XMLHttpRequest,j=`${this.socket.signalingServerUrl}/api/apikeys/${this.options.key}/clients/`;R.open("get",j,!0),R.onerror=function(){u._abort("server-error","Could not get peers from the server."),r([])},R.onreadystatechange=function(){if(R.readyState===4)if(R.status===401){r([]);const z=new Error("It doesn't look like you have permission to list peers IDs. Please enable the SkyWay REST API on dashboard");z.type="list-error",P.error(z),u.emit(de.EVENTS.error.key,z)}else R.status===200?r(JSON.parse(R.responseText)):r([])},R.send(null)}async fetchPeerExists(r){if(!this.open)throw new Error("Peer is not yet connected to signaling server");const u=new Date().getTime();if(this._lastFetchPeerExistsTime!==void 0&&u-this._lastFetchPeerExistsTime<1e3)throw new Error("fetchPeerExists can only be called once per second");this._lastFetchPeerExistsTime=u;const R=`${this.socket.signalingServerUrl}/api/apikeys/${this.options.key}/peers/${r}/exists`,j=await fetch(R);if(j.status===200)return(await j.json()).exists;{const z=await j.text();throw new Error(z)}}_checkOpenStatus(){return this.open||this._emitNotConnectedError(),this.open}_emitNotConnectedError(){P.warn("You cannot connect to a new Peer because you are not connecting to SkyWay server now.You can create a new Peer to reconnect, or call reconnect() on this peer if you believe its ID to still be available.");const r=new Error("Cannot connect to new Peer before connecting to SkyWay server or after disconnecting from the server.");r.type="disconnected",P.error(r),this.emit(de.EVENTS.error.key,r)}_initializeServerConnection(r){this.socket=new Ce(this.options.key,{secure:this.options.secure,host:this.options.host,port:this.options.port,dispatcherSecure:this.options.dispatcherSecure,dispatcherHost:this.options.dispatcherHost,dispatcherPort:this.options.dispatcherPort}),this._setupMessageHandlers(),this.socket.on("error",u=>{this._abort("socket-error",u)}),this.socket.on("disconnect",()=>{this.disconnect(!0);const u=new Error("Lost connection to server.");u.type="socket-error",P.error(u),this.emit(de.EVENTS.error.key,u)}),this.socket.start(r,this.options.token,this.options.credential)}_initializeSfuRoom(r,u={}){if(this.rooms[r])return this.rooms[r];const R=new ge(r,this.id,u);this.rooms[r]=R,this._setupSFURoomMessageHandlers(R);const j={roomName:r,roomType:"sfu"};return this.socket.send(O.MESSAGE_TYPES.CLIENT.ROOM_JOIN.key,j),R}_initializeFullMeshRoom(r,u={}){if(this.rooms[r])return this.rooms[r];const R=new be(r,this.id,u);this.rooms[r]=R,this._setupMeshRoomMessageHandlers(R);const j={roomName:r,roomType:"mesh"};return this.socket.send(O.MESSAGE_TYPES.CLIENT.ROOM_JOIN.key,j),R}_setupMessageHandlers(){this.socket.on(O.MESSAGE_TYPES.SERVER.OPEN.key,r=>{this.id=r.peerId,this._pcConfig=Object.assign({},this.options.config);const u=this._pcConfig.iceServers;this._pcConfig.iceServers=u?u.slice():[];const R=r.turnCredential;let j,z;if(typeof R=="object"?(j=R.username,z=R.credential):typeof R=="string"&&(j=`${this.options.key}$${this.id}`,z=R),this.options.turn===!0&&j&&z){const J=[{protocol:"turn",transport:"tcp"},{protocol:"turn",transport:"udp"}];X.detectBrowser().name!=="edge"&&J.push({protocol:"turns",transport:"tcp"});for(const re of J){const ae=re.protocol,pe=re.transport,De={urls:`${ae}:${O.TURN_HOST}:${O.TURN_PORT}?transport=${pe}`,url:`${ae}:${O.TURN_HOST}:${O.TURN_PORT}?transport=${pe}`,username:j,credential:z};this._pcConfig.iceServers.push(De)}P.log("SkyWay TURN Server is available")}else P.log("SkyWay TURN Server is unavailable");this.emit(de.EVENTS.open.key,this.id)}),this.socket.on(O.MESSAGE_TYPES.SERVER.ERROR.key,r=>{const u=new Error(r.message);u.type=r.type,P.error(u),this.emit(de.EVENTS.error.key,u)}),this.socket.on(O.MESSAGE_TYPES.SERVER.LEAVE.key,r=>{P.log(`Received leave message from ${r}`),this._cleanupPeer(r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.FORCE_CLOSE.key,({src:r,connectionId:u})=>{const R=this.getConnection(r,u);R&&R.close(!1)}),this.socket.on(O.MESSAGE_TYPES.SERVER.AUTH_EXPIRES_IN.key,r=>{P.log(`Credential expires in ${r}`),this.emit(de.EVENTS.expiresin.key,r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.OFFER.key,r=>{const u=r.roomName;if(u){const z=this.rooms[u];z&&z.handleOffer(r);return}const R=r.connectionId;let j=this.getConnection(r.src,R);if(j){j.updateOffer(r);return}r.connectionType==="media"?(j=new q(r.src,{connectionId:R,payload:r,metadata:r.metadata,originator:!1,queuedMessages:this._queuedMessages[R],pcConfig:this._pcConfig}),j.startConnection(),P.log("MediaConnection created in OFFER"),this._addConnection(r.src,j),this.emit(de.EVENTS.call.key,j)):r.connectionType==="data"?(j=new D(r.src,{connectionId:R,payload:r,metadata:r.metadata,label:r.label,dcInit:r.dcInit,serialization:r.serialization,queuedMessages:this._queuedMessages[R],pcConfig:this._pcConfig}),j.startConnection(),P.log("DataConnection created in OFFER"),this._addConnection(r.src,j),this.emit(de.EVENTS.connection.key,j)):P.warn("Received malformed connection type: ",r.connectionType),delete this._queuedMessages[R]}),this.socket.on(O.MESSAGE_TYPES.SERVER.ANSWER.key,r=>{const u=r.roomName;if(u){const j=this.rooms[u];j&&j.handleAnswer(r);return}const R=this.getConnection(r.src,r.connectionId);R?R.handleAnswer(r):this._storeMessage(O.MESSAGE_TYPES.SERVER.ANSWER.key,r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.CANDIDATE.key,r=>{const u=r.roomName;if(u){const j=this.rooms[u];j&&j.handleCandidate(r);return}const R=this.getConnection(r.src,r.connectionId);R?R.handleCandidate(r):this._storeMessage(O.MESSAGE_TYPES.SERVER.CANDIDATE.key,r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.ROOM_USER_JOIN.key,r=>{const u=this.rooms[r.roomName];u&&u.handleJoin(r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.ROOM_USER_LEAVE.key,r=>{const u=this.rooms[r.roomName];u&&u.handleLeave(r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.ROOM_DATA.key,r=>{const u=this.rooms[r.roomName];u&&u.handleData(r)}),this.socket.on(O.MESSAGE_TYPES.SERVER.ROOM_LOGS.key,r=>{const u=this.rooms[r.roomName];u&&u.handleLog(r.log)}),this.socket.on(O.MESSAGE_TYPES.SERVER.ROOM_USERS.key,r=>{const u=this.rooms[r.roomName];u&&(r.type==="media"?u.makeMediaConnections(r.userList):u.makeDataConnections(r.userList))}),this.socket.on(O.MESSAGE_TYPES.SERVER.SFU_OFFER.key,r=>{const u=this.rooms[r.roomName];u&&(u.updateMsidMap(r.msids),u.handleOffer(r))})}_setupConnectionMessageHandlers(r){r.on(oe.EVENTS.candidate.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_CANDIDATE.key,u)}),r.on(oe.EVENTS.answer.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_ANSWER.key,u)}),r.on(oe.EVENTS.offer.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_OFFER.key,u)}),r.on(oe.EVENTS.forceClose.key,()=>{const u={dst:r.remoteId,connectionId:r.id};this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_FORCE_CLOSE.key,u)})}_setupRoomMessageHandlers(r){r.on(ge.MESSAGE_EVENTS.broadcast.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.ROOM_SEND_DATA.key,u)}),r.on(ge.MESSAGE_EVENTS.getLog.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.ROOM_GET_LOGS.key,u)}),r.on(ge.MESSAGE_EVENTS.leave.key,u=>{delete this.rooms[r.name],this.socket.send(O.MESSAGE_TYPES.CLIENT.ROOM_LEAVE.key,u)})}_setupSFURoomMessageHandlers(r){this._setupRoomMessageHandlers(r),r.on(ge.MESSAGE_EVENTS.offerRequest.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SFU_GET_OFFER.key,u)}),r.on(ge.MESSAGE_EVENTS.answer.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SFU_ANSWER.key,u)}),r.on(ge.MESSAGE_EVENTS.candidate.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SFU_CANDIDATE.key,u)})}_setupMeshRoomMessageHandlers(r){this._setupRoomMessageHandlers(r),r.on(be.MESSAGE_EVENTS.offer.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_OFFER.key,u)}),r.on(be.MESSAGE_EVENTS.answer.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_ANSWER.key,u)}),r.on(be.MESSAGE_EVENTS.candidate.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.SEND_CANDIDATE.key,u)}),r.on(be.MESSAGE_EVENTS.getPeers.key,u=>{this.socket.send(O.MESSAGE_TYPES.CLIENT.ROOM_GET_USERS.key,u)})}_abort(r,u){P.error("Aborting!"),this.disconnect(!0);const R=new Error(u);R.type=r,P.error(R),this.emit(de.EVENTS.error.key,R)}_addConnection(r,u){this.connections[r]||(this.connections[r]=[]),this.connections[r].push(u),this._setupConnectionMessageHandlers(u)}_storeMessage(r,u){this._queuedMessages[u.connectionId]||(this._queuedMessages[u.connectionId]=[]),this._queuedMessages[u.connectionId].push({type:r,payload:u})}_cleanup(){if(this.connections)for(const r of Object.keys(this.connections))this._cleanupPeer(r);this.emit(de.EVENTS.close.key)}_cleanupPeer(r){if(this.connections[r])for(const u of this.connections[r])u.close(!1)}static get EVENTS(){return Ke}}v.default=de},0:function(I,v){}}).default})})(He);var Ze=He.exports;const et=Qe(Ze),rt=({exam:Ue,skywayApiKey:Ve,skywayId:I})=>{const v=Te.useRef(null),l=Te.useRef(null),a=Te.useRef(null);let p;Te.useEffect(()=>{a.current=new et(I,{key:Ve,debug:3}),a.current.on("open",()=>{console.log("Peer is open. My Peer ID:",I),console.log("Peer is open. My Peer ID:",a.current.id)}),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(m=>{const f=v.current;f.srcObject=m,f.play(),p=m}).catch(m=>{console.error("mediaDevice.getUserMedia() error:",m)}),a.current.on("call",m=>{m.answer(p),m.on("stream",f=>{const e=l.current;e.srcObject=f,e.play()})}),a.current.on("error",m=>{alert(m.message)}),a.current.on("close",()=>{alert("通信が切断しました。")})},[]);const h=()=>{const m=document.getElementById("their-id").value,f=a.current.call(m,p);console.log("me",f),f.on("stream",e=>{const o=l.current;o.srcObject=e,o.play()})},y=async()=>{},x=()=>{};return me.jsxs("div",{className:"medical-exam-video",children:[me.jsxs("div",{className:"medical-exam-video__main",children:[me.jsx("video",{ref:v,className:"medical-exam-video__my-video",width:200}),me.jsx("p",{id:"my-id",className:"medical-exam-video__my-id"}),me.jsx("input",{id:"their-id",className:"medical-exam-video__their-id",placeholder:"相手のID"}),me.jsx("button",{onClick:h,className:"medical-exam-video__make-call-button",children:"発信"}),me.jsx("button",{onClick:y,className:"medical-exam-video__share-screen-button",children:"画面共有"}),me.jsx("button",{onClick:x,className:"medical-exam-video__stop-screen-button",children:"共有停止"})]}),me.jsx("div",{className:"medical-exam-video__side",children:me.jsx("video",{ref:l,className:"medical-exam-video__their-video"})})]})};export{rt as default};
